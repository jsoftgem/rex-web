function withHost(url){return url&&"/"===url.charAt(0)&&(url=url.substring(1,url.length-1)),HOST+url}function setChildIndexIds(element,taskId,suffix,depth){var children=$(element).children(),id=$(element).attr("id");if(id=id?id+"{{$index}}tsk"+taskId+"suf"+suffix+"dep"+depth:"grid{{$index}}tsk"+taskId+"suf"+suffix+"dep"+depth,++depth,$(element).attr("id",id),children.length>0)for(var i=0;i<children.length;i++){var element=children[i];setChildIndexIds(element,taskId,suffix+"_"+i,depth)}}function Task(){var task={};return task.id=void 0,task.glyph=void 0,task.title=void 0,task.active=void 0,task.size=void 0,task.pinned=void 0,task.locked=void 0,this.url=void 0,task}function Control(){var control={};return control.id=void 0,control.glyph=void 0,control.label=void 0,control.disabled=void 0,control}function estimateHeight(height){var _pc=window.innerWidth<=768?100:50;return height-_pc}function generateTask(scope,t,f2){if(scope.task.pageLoaded=!1,void 0===scope.task.page||null===scope.task.page){if(scope.task.pages){var $page=getHomePageFromTaskPages(scope.task);scope.task.page=$page.page,scope.homeUrl=$page.page.get,scope.home=$page.page.name,scope.task.navPages=[$page.page]}}else{scope.homeUrl=scope.task.page.get,scope.task.page.param=scope.task.pageParam;var page=scope.task.page;if(scope.task.page.isHome===!1){if(scope.task.pages){var $page=getHomePageFromTaskPages(scope.task);scope.home=$page.page.name,scope.task.navPages=[$page.page]}}else scope.task.navPages=[page];scope.task.page.param&&"null"!==scope.task.page.param&&(scope.homeUrl=scope.task.page.get+scope.task.page.param),scope.task.navPages.indexOf(page)>-1?scope.currentPageIndex=getPageIndexFromPages(scope.task.page.name,scope.task.navPages).index:(scope.task.navPages.push(page),scope.currentPageIndex=scope.task.navPages.length-1);for(var i=0;i<scope.task.toolbars.length;i++)"back"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!(scope.currentPageIndex>0)),"forward"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!(scope.currentPageIndex<scope.task.navPages.length-1))}scope.userTask.flowId=scope.task.flowId;var loadGetFn=function(){scope.loadGet()};t(loadGetFn,500)}function isJson(str){try{JSON.parse(str)}catch(e){return!1}return!0}function SaveControl(){var saveControl=new Control;return saveControl.label="Save",saveControl.disabled=!1,saveControl.glyph="glyphicon glyphicon-floppy-save",saveControl.uiType="info",saveControl}function CreateControl(){var createControl=new Control;return createControl.label="New",createControl.disabled=!1,createControl.glyph="glyphicon glyphicon-plus",createControl.uiType="info",createControl}function DeleteControl(){var deleteControl=new Control;return deleteControl.label="Delete",deleteControl.disabled=!1,deleteControl.glyph="glyphicon glyphicon-floppy-remove",deleteControl.uiType="danger",deleteControl}function CopyControl(){var copyControl=new Control;return copyControl.label="Copy",copyControl.disabled=!1,copyControl.glyph="glyphicon glyphicon-floppy-remove",copyControl.uiType="info",copyControl}function FlowOptionsGET(dto,url,scope,compile,sessionService){var headers={Authorization:"bearer "+sessionService.getSessionProperty("token"),method:"get",flowPage:scope.task.page.name};return(new dto.newOptions).withOption("ajax",{url:url,type:"GET",headers:headers,cache:!0,crossDomain:!0,global:!1,beforeSend:function(){scope.task&&(scope.task.loaded=!1)},complete:function(){scope.task&&(scope.task.loaded=!0)}}).withDataProp("data").withOption("createdRow",function(row){scope&&compile&&compile(angular.element($(row).find("td div.actions")).contents())(scope)}).withOption("autoWidth",!0).withOption("info",!0).withOption("processing",!0).withOption("sDom","<'top'iflp<'clear'>>rt<'bottom'iflp<'clear'>>").withOption("stateSave",!0).withOption("serverSide",!0).withTableTools("swf/copy_csv_xls_pdf.swf").withTableToolsOption("sRowSelect","os").withTableToolsButtons(["copy",{sExtends:"collection",sButtonText:"Print",aButtons:[{sExtends:"text",bShowAll:!0,sButtonText:"All",fnClick:function(nButton,oConfig,oFlash){scope.task.flowHttpService.query({method:"get",data:"",url:url+"/report_list",transformResponse:[]},scope.task).success(function(data){$(data).print({globalStyles:!0})})}}]}]).withColVis().withColVisOption("aiExclude",[0]).withColVisOption("buttonText","Columns").withPaginationType("simple_numbers")}function FlowOptionGETv2(dto,options){return dto.fromFnPromise(function(){return options.promise}).withOption("autoWidth",!0).withOption("info",!0).withOption("processing",!0).withOption("responsive",!0).withOption("sDom","<'top'iflp<'clear'>>rt<'bottom'iflp<'clear'>>").withOption("stateSave",!0)}function FlowColumns(dtc,editMethod,deleteMethod,viewMethod){return[dtc.newColumn(null).withTitle("Actions").notSortable().withOption("searchable",!1).renderWith(function(data,type,full,meta){return renderActions(data,editMethod,deleteMethod,viewMethod)})]}function renderCheckbox(data){var span="text-primary fa fa-square-o";return data&&(span="text-success fa fa-check-square-o"),"<p class='text-primary'><span class='"+span+"'></span></p>"}function renderActions(data,editMethod,deleteMethod,viewMethod){var edit="edit",del="delete",view="view";return void 0!=viewMethod&&(view=viewMethod),void 0!==editMethod&&(edit=editMethod),void 0!==deleteMethod&&(del=deleteMethod),"<div class='actions btn-group btn-group-md'><button ng-if="+view+" flow-permission-visible title='View' task='task' page='task.page' method='put'  type='button' class='btn btn-warning glyphicon glyphicon-search field-margin' ng-click='"+view+"("+JSON.stringify(data)+")'></button><button flow-permission-visible title='Edit' task='task' page='task.page' method='put'  type='button' class='btn btn-info glyphicon glyphicon-edit field-margin' ng-click='"+edit+"("+data.id+")'></button><button flow-permission-visible title='Delete' task='task' page='task.page' method='delete' type='button' class='btn btn-danger glyphicon glyphicon-trash field-margin' ng-click='"+del+"("+data.id+")'> </button></div>"}function renderMonth(data,filter){return"<span>"+filter("date")(data,"MMMM")+"</span>"}function renderDate(data,filter){return"<span>"+filter("date")(data,"medium")+"</span>"}function renderDateSmall(data,filter){return"<span>"+filter("date")(data,"MM/dd/yyyy")+"</span>"}function getPageFromTaskPages(name,task){}function getHomePageFromTaskPages(task){var $page={};return angular.forEach(task.pages,function(page,key){page.isHome&&(this.page=page,this.index=key)},$page),$page}function getPageIndexFromTaskPages(name,task){var $index=-1;return angular.forEach(task.pages,function(page,key){page.name===name&&(this.index=key)},$index),$index}function getPageIndexFromPages(name,pages){var $index=-1;return angular.forEach(pages,function(page,key){null!=page&&page.name===name&&(this.index=key)},$index),$index}function getMarketSegment(marketPotential){if(void 0===marketPotential||0===marketPotential)return void 0;var marketSegment=void 0;return marketPotential>=18e3?marketSegment="HMP":18e3>marketPotential&&marketPotential>8e3?marketSegment="MMP1":8e3>=marketPotential&&marketPotential>=4e3?marketSegment="MMP2":4e3>marketPotential&&marketPotential>=1400?marketSegment="LMP1":1400>marketPotential&&(marketSegment="LMP2"),marketSegment}function getFirstMonday(date){for(date.setDate(1);1!==date.getDay();)date.setDate(date.getDate()+1);return date}function getWeekOfMonth(date){var prefixes=["1","2","3","4","5"];return prefixes[0|date.getDate()/7]}function getDayName(dayOfWeek){var di=dayOfWeek-1;return days[di]}function isPastMonthDay(date,firstMondayDate){return date.getDate()<firstMondayDate.getDate()?!0:!1}function isDayEnabled(dayDate,currentDate){var enabled=void 0;if(0===currentDate.getMonth()&&11===dayDate.getMonth())enabled=!1;else if(11===currentDate.getMonth()&&0===dayDate.getMonth())enabled=!0;else if(dayDate.getMonth()<currentDate.getMonth())enabled=!1;else if(dayDate.getMonth()>currentDate.getMonth())enabled=!0;else{var firstMondayDate=getFirstMonday(currentDate);enabled=isPastMonthDay(dayDate,firstMondayDate)?!1:!0}return enabled}angular.module("war.resources",["war.session"]).factory("WarResource",["$resource",function(resource){var warResource=function(options){var rs=resource(options);return rs.getAvatarPath=function(fileId){return withHost("services/download_service/getContent/"+fileId)},rs};return warResource}]).factory("FlowUserDetail",["WarResource",function(resource){var flowUserDetail=resource(withHost("services/v2/user/detail/:path"));return flowUserDetail.currentDetail=function(flowUserId,fn,errfn){return flowUserDetail.get({path:flowUserId},fn,errfn)},flowUserDetail}]).factory("WarAgent",["WarResource",function(resource){var warAgent=resource(withHost("services/v2/war/agent/:path"));return warAgent.current=function(fn,errfn){return warAgent.get({path:"current-agent"},fn,errfn)},warAgent}]).factory("TaskResource",["WarResource",function(resource){var taskResource=resource(withHost("services/v2/task/:path"));return taskResource.getSessionTasks=function(fn,errfn){return taskResource.query({path:"user"},fn,errfn)},taskResource}]).factory("GroupResource",["WarResource",function(resource){var groupResource=resource(withHost("services/v2/user/group/:path"));return groupResource.getByName=function(name,fn,errfn){groupResource.get({path:"by-name",name:name},fn,errfn)},groupResource}]),angular.module("adminControllers",["fluid","ngResource","datatables"]).controller("usrMgrCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","flowMessageService","flowModalService","$compile","$filter","sessionService",function(s,dto,dtc,ms,fm,c,f,ss){s.task.editPassword=!1;var create=new CreateControl;create.id="usr_mgr_create_ctl",create.action=function(){s.task.usrMgrCreate={},s.task.usrMgrCreate.flowInstance={},s.task.usrMgrCreate.flowInstance.flowUserDetail={},s.task.usrMgrCreate.flowUserGroup={},s.task.reTypePassword="",angular.copy(s.task.usrMgrModel,s.tempData),void 0===s.task.usrMgrCreate.flowInstance.flowUserProfileSet&&(s.task.usrMgrCreate.flowInstance.flowUserProfileSet=[]),s.flow.goTo("usr_mgr_create")};var save=new SaveControl;save.id="usr_mgr_edit_ctl",save.action=function(){$("#"+s.flow.getElementFlowId("usrMgr_submit")).trigger("click")},s.save=function(){if("usr_mgr_edit"===s.task.page.name)if(angular.equals(s.task.usrMgrEdit,s.task.editTemp))s.flow.message.info(UI_MESSAGE_NO_CHANGE);else{if(s.task.editPassword){if(s.task.reTypePassword!==s.task.usrMgrEdit.flowInstance.password)return void s.flow.message.warning("Password did not match.")}else s.task.usrMgrEdit.flowInstance.password=null;s.flow.action("put",s.task.usrMgrEdit,s.task.usrMgrEdit.flowInstance.id)}else if("usr_mgr_create"===s.task.page.name){if(s.task.reTypePassword!==s.task.usrMgrCreate.flowInstance.password)return void s.flow.message.warning("Password did not match.");s.flow.action("put",s.task.usrMgrCreate)}};var deleteCtl=new DeleteControl;deleteCtl.id="usr_mgr_del_ctl",s.dtOptions=new FlowOptionsGET(dto,s.flow.getHomeUrl(),s,c,ss),s.dtColumns=FlowColumns(dtc),s.dtColumns.push(dtc.newColumn("username").withTitle("Username").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("email").withTitle("Email").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("group").withTitle("Group").withOption("searchable",!1).withOption("sortable",!1)),s.edit=function(id){s.task.usrMgrEdit={},s.task.usrMgrEdit.flowInstance={},s.task.editTemp={},s.flow.goTo("usr_mgr_edit",id)},s["delete"]=function(id){fm.show(s.flow.getElementFlowId("usrMgrDeleteModal")),s.http.get("services/flow_user_query/getInstance/",id).success(function(data){s.task.usrMgrEdit={},s.task.usrMgrEdit.flowInstance=data})},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method?"usr_mgr_edit"==s.task.page.name?(angular.copy(s.task.usrMgrEdit,s.task.editTemp),s.flow.goToHome()):"usr_mgr_create"===s.task.page.name&&(s.task.usrMgrCreate={},s.task.usrMgrCreate.flowUserGroup={},angular.copy(s.task.usrMgrCreate,s.tempData),s.flow.goToHome()):"delete"===method&&"usr_mgr_settings"===s.task.page.name&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,usr_mgr,size){"usr_mgr_settings"===usr_mgr&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,page,size){"usr_mgr_settings"===page&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getRefreshId(),function(){s.dtInstance&&s.dtInstance.reloadData()}),s.flow.pageCallBack=function(page,data,source){"usr_mgr_edit"===page?s.task.usrMgrEdit.flowInstance.id&&"refresh"!==source||(s.task.usrMgrEdit.flowInstance=data,s.task.reTypePassword=s.task.usrMgrEdit.flowInstance.password,s.oldPassword="",angular.copy(s.task.usrMgrEdit.flowInstance.password,s.oldPassword),void 0===s.task.usrMgrEdit.flowInstance.flowUserProfileSet&&(s.task.usrMgrEdit.flowInstance.flowUserProfileSet=[]),s.http.get("services/flow_user_group_query/getInstanceByUserId/",s.task.usrMgrEdit.flowInstance.id).success(function(data){s.task.usrMgrEdit.flowUserGroup=data,angular.copy(s.task.usrMgrEdit,s.task.editTemp)})):"usr_mgr_settings"===page&&s.dtInstance&&s.dtInstance.reloadData(),s.flow.addControl(save,["usr_mgr_edit","usr_mgr_create"]),s.flow.addControl(deleteCtl,"usr_mgr_edit"),s.flow.addControl(create,"usr_mgr_settings")},s.$on(s.flow.getEventId("usr_mgr_del_ctl"),function(){fm.show(s.flow.getElementFlowId("usrMgrDeleteModal"))}),s.deleteConfirm=function(){s.flow.action("delete",s.task.usrMgrEdit,s.task.usrMgrEdit.flowInstance.id),fm.hide(s.flow.getElementFlowId("usrMgrDeleteModal")),"usr_mgr_settings"!==s.task.page.name&&s.flow.goToHome(),s.dtInstance&&s.dtInstance.reloadData()},s.deleteCancel=function(){fm.hide(s.flow.getElementFlowId("usrMgrDeleteModal"))}}]).controller("profileCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","flowMessageService","flowModalService","$compile","$filter","sessionService",function(s,dto,dtc,ms,fm,c,f,ss){var create=new CreateControl;create.id="profile_create_ctl",create.action=function(){s.task.profileCreate={},s.task.profileCreate.flowProfilePermissions=[],s.flow.goTo("profile_create")};var save=new SaveControl;save.id="profile_edit_ctl",save.action=function(){$("#"+s.flow.getElementFlowId("profile_submit")).trigger("click")};var deleteCtl=new DeleteControl;deleteCtl.id="profile_del_ctl",deleteCtl.action=function(){fm.show(s.flow.getElementFlowId("profileDeleteModal"))},s.dtOptions=new FlowOptionsGET(dto,s.flow.getHomeUrl(),s,c,ss),s.dtColumns=FlowColumns(dtc),s.dtColumns.push(dtc.newColumn("profileName").withTitle("Name").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("createdDt").withTitle("Date created").withOption("searchable",!0).renderWith(function(data){return renderDate(data,f)})),s.edit=function(id){s.task.profileEdit={},s.task.tempEdit={},s.flow.goTo("profile_edit",id)},s["delete"]=function(id){fm.show(s.flow.getElementFlowId("profileDeleteModal")),s.http.get("services/flow_user_profile_query/getInstance/",id).success(function(page){s.task.profileEdit=page})},s.save=function(){"profile_edit"==s.task.page.name?angular.equals(s.task.profileEdit,s.task.tempEdit)?s.flow.message.info(UI_MESSAGE_NO_CHANGE):s.flow.action("put",s.task.profileEdit,s.task.profileEdit.id):"profile_create"===s.task.page.name&&s.flow.action("put",s.task.profileCreate)},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method?"profile_edit"==s.task.page.name?(s.task.profileEdit={},angular.copy(s.task.profileEdit,s.task.tempEdit),s.flow.goToHome()):"profile_create"===s.task.page.name&&(s.task.profileCreate={},s.flow.goToHome()):"delete"===method&&"profile_settings"===s.task.page.name&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,profile,size){"profile_settings"===profile&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getRefreshId(),function(){s.dtInstance&&s.dtInstance.reloadData()}),s.flow.pageCallBack=function(page,data,source){"profile_edit"===page?s.task.profileEdit.id&&"refresh"!==source||(s.task.profileEdit=data,s.task.profileEdit.flowProfilePermissions||(s.task.profileEdit.flowProfilePermissions=[]),angular.copy(s.task.profileEdit,s.task.tempEdit)):"profile_settings"===page&&s.dtInstance&&s.dtInstance.reloadData(),s.flow.addControl(save,["profile_edit","profile_create"]),s.flow.addControl(deleteCtl,"profile_edit"),s.flow.addControl(create,"profile_settings")},s.deleteConfirm=function(){s.flow.action("delete",s.task.profileEdit,s.task.profileEdit.id),fm.hide(s.flow.getElementFlowId("profileDeleteModal")),"profile_settings"!==s.task.page.name&&s.flow.goToHome(),s.dtInstance&&s.dtInstance.reloadData()},s.deleteCancel=function(){fm.hide(s.flow.getElementFlowId("profileDeleteModal"))}}]).controller("groupCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","flowMessageService","flowModalService","$compile","$filter","sessionService",function(s,dto,dtc,ms,fm,c,f,ss){s.task.editTemp||(s.task.editTemp={}),s.task.createTemp||(s.task.createTemp={});var create=new CreateControl;create.id="group_create_ctl",create.action=function(page){s.flow.goTo("group_create").then(function(){s.task.groupCreate={},s.task.groupCreate.flowUsers=[],s.task.groupCreate.flowUserGroupModules=[],angular.copy(s.task.groupCreate,s.task.createTemp)})};var save=new SaveControl;save.id="group_edit_ctl",save.action=function(){"group_usr_mgr_create"===s.task.page.name?$("#"+s.flow.getElementFlowId("usrMgr_submit")).trigger("click"):$("#"+s.flow.getElementFlowId("group_submit")).trigger("click")};var deleteCtl=new DeleteControl;deleteCtl.id="group_del_ctl",s.dtOptions=new FlowOptionsGET(dto,s.flow.getHomeUrl(),s,c,ss),s.dtColumns=FlowColumns(dtc),s.dtColumns.push(dtc.newColumn("groupName").withTitle("Name").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("groupTitle").withTitle("Title").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("groupAdminFullname").withTitle("Admin").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("createdDt").withTitle("Date created").renderWith(function(data){return renderDate(data,f)})),s.edit=function(id){s.task.groupEdit={},s.flow.goTo("group_edit",id)},s["delete"]=function(id){fm.show(s.flow.getElementFlowId("groupDeleteModal")),s.http.get("services/flow_user_group_query/getInstance/",id).success(function(page){s.task.groupEdit=page})},s.save=function(){if("group_edit"==s.task.page.name)if(angular.equals(s.task.groupEdit,s.task.editTemp))s.flow.message.info(UI_MESSAGE_NO_CHANGE);else{for(var i=0;i<s.task.groupEdit.flowUserGroupModules.length;i++)s.task.groupEdit.flowUserGroupModules[i].groupName=s.task.groupEdit.groupName;s.flow.action("put",s.task.groupEdit,s.task.groupEdit.id)}else if("group_create"===s.task.page.name){for(var i=0;i<s.task.groupCreate.flowUserGroupModules.length;i++)s.task.groupCreate.flowUserGroupModules[i].groupName=s.task.groupCreate.groupName;s.flow.action("put",s.task.groupCreate)}},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method?"group_edit"==s.task.page.name?(angular.copy(s.task.groupEdit,s.task.editTemp),s.flow.goToHome()):"group_create"===s.task.page.name&&(s.task.groupCreate={},angular.copy(s.task.groupCreate,s.task.createTemp),s.flow.goToHome()):"delete"===method&&"group_settings"===s.task.page.name&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,group,size){"group_settings"===group&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getRefreshId(),function(){s.dtInstance&&s.dtInstance.reloadData()}),s.flow.pageCallBack=function(page,data,source){"group_edit"===page?s.task.groupEdit.id&&"refresh"!==source||(s.task.groupEdit=data,angular.copy(s.task.groupEdit,s.task.editTemp)):"group_settings"===page&&s.dtInstance&&s.dtInstance.reloadData(),s.flow.addControl(create,"group_settings"),s.flow.addControl(save,["group_edit","group_create"]),s.flow.addControl(deleteCtl,"group_edit")},s.$on(s.flow.getEventId("group_del_ctl"),function(){fm.show(s.flow.getElementFlowId("groupDeleteModal"))}),s.deleteConfirm=function(){s.flow.action("delete",s.task.groupEdit,s.task.groupEdit.id),fm.hide(s.flow.getElementFlowId("groupDeleteModal")),"group_settings"!==s.task.page.name&&s.flow.goToHome(),s.dtInstance&&s.dtInstance.reloadData()},s.deleteCancel=function(){fm.hide(s.flow.getElementFlowId("groupDeleteModal"))},s.$on(s.flow.getEventId("createFlowModules"),function(){s.task.groupModuleEdit=!1,s.task.groupModule={},s.task.groupModule.flowUserGroupTask={},fm.show(s.flow.getElementFlowId("groupModuleModal"))}),s.$on(s.flow.getEventId("editFlowModules"),function(event,id){s.task.groupModuleEdit=!0;var groupModule;if("group_create"===s.task.page.name)for(var i=0;i<s.task.groupEdit.flowUserGroupModules.length;i++){var mod=s.task.groupEdit.flowUserGroupModules[i];if(mod.flowModuleId===id){groupModule=mod;break}}else if("group_edit"===s.task.page.name)for(var i=0;i<s.task.groupEdit.flowUserGroupModules.length;i++){var mod=s.task.groupEdit.flowUserGroupModules[i];if(mod.flowModuleId===id){groupModule=mod;break}}s.task.groupModule=groupModule,fm.show(s.flow.getElementFlowId("groupModuleModal"))}),s.addGroupModule=function(){if("group_create"===s.task.page.name){for(var contains=!1,index=0,i=0;i<s.task.groupCreate.flowUserGroupModules.length;i++){var mod=s.task.groupCreate.flowUserGroupModules[i];if(mod.flowModuleId===s.task.groupModule.flowModuleId){contains=!0,index=i;break}}contains&&!s.task.groupModuleEdit?ms.danger(s.flow.getElementFlowId("groupModuleModalMsg"),"Module already exists in group.",2e3).open():(s.task.groupModuleEdit?s.task.groupCreate.flowUserGroupModules[index]=s.task.groupModule:s.task.groupCreate.flowUserGroupModules.push(s.task.groupModule),fm.hide(s.flow.getElementFlowId("groupModuleModal")))}else if("group_edit"===s.task.page.name){s.task.groupEdit.flowUserGroupModules||(s.task.groupEdit.flowUserGroupModules=[]);for(var contains=!1,index=0,i=0;i<s.task.groupEdit.flowUserGroupModules.length;i++){var mod=s.task.groupEdit.flowUserGroupModules[i];if(mod.flowModuleId===s.task.groupModule.flowModuleId){contains=!0,index=i;break}}contains&&!s.task.groupModuleEdit?ms.danger(s.flow.getElementFlowId("groupModuleModalMsg"),"Module already exists in group.",2e3).open():(s.task.groupModuleEdit?s.task.groupEdit.flowUserGroupModules[index]=s.task.groupModule:s.task.groupEdit.flowUserGroupModules.push(s.task.groupModule),fm.hide(s.flow.getElementFlowId("groupModuleModal")))}},s.cancelGroupModule=function(){fm.hide(s.flow.getElementFlowId("groupModuleModal"))}}]),angular.module("app",["MAdmin","war.resources","war.session","war.sidebar","datatables","datatables.bootstrap","datatables.tabletools","datatables.colvis","flowServices","flowFactories","home","fluid","devControllers","adminControllers","flowAppDirectives","sessionControllers","infinite-scroll","ngDragDrop","rexTemplates"]).run(["flowFrameService","flowHttpService","userProfile","responseEvent","userAppSetting","HOST","hasProfile","$rootScope","sessionService","UserFactory","FlowUserDetail","WarAgent","TaskResource","GroupResource","userSessionService",function(f,fhp,up,re,uas,h,hp,rs,ss,uf,FlowUserDetail,WarAgent,TaskResource,GroupResource,uss){fhp.host=h,fhp.permissionUrl="services/flow_permission/has_permission",re.addResponse(void 0,401,!0,"signin.html"),re.addResponse("NOT_AUTHENTICATED",401),hp.url="services/flow_permission/has_profile"}]).filter("setDecimal",function($filter){return function(input,places){if(isNaN(input))return input;var factor="1"+Array(+(places>0&&places+1)).join("0");return Math.round(input*factor)/factor}}).filter("reportWeek",function(){return function(input){var week={};return input>0&&(week.selectedWeek=input),week}}).filter("totalFrequency",function(){return function(items,userAccessLevel){var filtered=[],$totalFrequency={value:0};return angular.forEach(items,function(item){this.value+=item.customerFrequency},$totalFrequency),filtered.push({frequency:$totalFrequency.value}),filtered}}),Chart.defaults.global={animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= datasetLabel %> - <%= value %>",onAnimationProgress:function(){},onAnimationComplete:function(){}},angular.module("devControllers",["fluid","ngResource","datatables"]).controller("menuCtrl",["$scope","flowFrameService","flowHttpService",function(s,f,ff){s.addModule=function(module){f.addTask(module.task)},s.view="list",s.switchView=function(view){s.view=view},s.flow.pageCallBack=function(page,data){s.resultData=data}}]).controller("pageCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","flowMessageService","flowModalService","$filter","$compile","sessionService",function(s,dto,dtc,ms,fm,f,c,ss){var create=new CreateControl;create.id="page_create_ctl",create.action=function(){s.task.pageCreate={},s.flow.goTo("page_create")};var save=new SaveControl;save.id="page_edit_ctl",save.action=function(){$("#"+s.flow.getElementFlowId("page_submit")).trigger("click")};var deleteCtl=new DeleteControl;deleteCtl.id="page_del_ctl",deleteCtl.action=function(){fm.show(s.flow.getElementFlowId("pageDeleteModal"))},s.dtOptions=new FlowOptionsGET(dto,s.flow.getHomeUrl(),s,c,ss),s.dtColumns=FlowColumns(dtc),s.dtColumns.push(dtc.newColumn("name").withTitle("Name")),s.dtColumns.push(dtc.newColumn("title").withTitle("Title").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("home").withTitle("Page Url").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("isHome").withTitle("Home").withOption("searchable",!1).renderWith(function(data){return renderCheckbox(data)})),s.dtColumns.push(dtc.newColumn("createdDt").withTitle("Date created").renderWith(function(data,type,full,meta){return f("date")(data,"medium")}).withOption("searchable",!1)),s.dtColumns.push(dtc.newColumn("get").withTitle("Get URI").withOption("searchable",!1).notSortable()),s.dtColumns.push(dtc.newColumn("post").withTitle("POST URI").withOption("searchable",!1).notSortable()),s.dtColumns.push(dtc.newColumn("put").withTitle("Put URI").withOption("searchable",!1).notSortable()),s.dtColumns.push(dtc.newColumn("delURL").withTitle("Delete URI").withOption("searchable",!1).notSortable()),s.dtColumns.push(dtc.newColumn("pageLinkEnabled").withTitle("Page Link").withOption("searchable",!1).notSortable().renderWith(function(data){return renderCheckbox(data)})),s.dtColumns.push(dtc.newColumn("autoGet").withTitle("Auto loading").withOption("searchable",!1).notSortable().renderWith(function(data){return renderCheckbox(data)})),s.edit=function(id){s.task.pageEdit={},s.task.editTemp={},s.flow.goTo("page_edit",id)},s["delete"]=function(id){fm.show(s.flow.getElementFlowId("pageDeleteModal")),s.http.get("services/flow_page_query/getInstance/",id).success(function(page){s.task.pageEdit=page})},s.save=function(){"page_edit"==s.task.page.name?angular.equals(s.task.pageEdit,s.task.editTemp)?s.flow.message.info(UI_MESSAGE_NO_CHANGE):s.flow.action("put",s.task.pageEdit,s.task.pageEdit.id):"page_create"===s.task.page.name&&s.flow.action("put",s.task.pageCreate)},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method?"page_edit"===s.task.page.name?(angular.copy(s.task.pageEdit,s.task.editTemp),s.flow.goToHome()):"page_create"===s.task.page.name&&(s.task.pageCreate={},s.flow.goToHome()):"delete"===method&&"page_settings"===s.task.page.name&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,page,size){"page_settings"===page&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getRefreshId(),function(){s.dtInstance&&s.dtInstance.reloadData()}),s.flow.pageCallBack=function(page,data,source){"page_edit"===page?s.task.pageEdit.id&&"refresh"!==source||(s.task.pageEdit=data,angular.copy(s.task.pageEdit,s.task.editTemp)):"page_settings"===page&&s.dtInstance&&s.dtInstance.reloadData(),s.flow.addControl(save,["page_edit","page_create"]),s.flow.addControl(deleteCtl,"page_edit"),s.flow.addControl(create,"page_settings")},s.deleteConfirm=function(){s.flow.action("delete",s.task.pageEdit,s.task.pageEdit.id),fm.hide(s.flow.getElementFlowId("pageDeleteModal")),"page_settings"!==s.task.page.name&&s.flow.goToHome(),s.dtInstance&&s.dtInstance.reloadData()},s.deleteCancel=function(){fm.hide(s.flow.getElementFlowId("pageDeleteModal"))}}]).controller("taskCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","flowMessageService","flowModalService","$compile","sessionService",function(s,dto,dtc,ms,fm,c,ss){var create=new CreateControl;create.id="task_create_ctl",create.action=function(){s.task.tskCreate={},s.flow.goTo("task_create")};var save=new SaveControl;save.id="task_edit_ctl",save.action=function(){$("#"+s.flow.getElementFlowId("task_submit")).trigger("click")};var deleteCtl=new DeleteControl;deleteCtl.id="task_del_ctl",deleteCtl.action=function(){fm.show(s.flow.getElementFlowId("taskDeleteModal"))},s.dtOptions=new FlowOptionsGET(dto,s.flow.getHomeUrl(),s,c,ss),s.dtColumns=FlowColumns(dtc),s.dtColumns.push(dtc.newColumn("id").withTitle("Task ID").withOption("searchable",!1)),s.dtColumns.push(dtc.newColumn("name").withTitle("Name").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("title").withTitle("Title").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("glyph").withTitle("Glyph").notSortable().withOption("searchable",!1).renderWith(function(data,type,full,meta){return"<span class='"+data+"'></span>"})),s.edit=function(id){s.task.tskEdit={},s.task.editTemp={},s.flow.goTo("task_edit",id)},s["delete"]=function(id){fm.show(s.flow.getElementFlowId("taskDeleteModal")),s.http.get("services/flow_task_query/getInstance/",id).success(function(task){s.task.tskEdit=task})},s.save=function(){"task_edit"==s.task.page.name?angular.equals(s.task.tskEdit,s.task.editTemp)?s.flow.message.info(UI_MESSAGE_NO_CHANGE):s.flow.action("put",s.task.tskEdit,s.task.tskEdit.id):"task_create"===s.task.page.name&&s.flow.action("put",s.task.tskCreate)},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method?"task_edit"==s.task.page.name?(s.task.tskEdit={},angular.copy(s.task.tskEdit,s.task.editTemp),s.flow.goToHome()):"task_create"===s.task.page.name&&(s.task.tskCreate={},s.flow.goToHome()):"delete"===method&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,page,size){"task_settings"===page&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getRefreshId(),function(){s.dtInstance&&s.dtInstance.reloadData()}),s.flow.pageCallBack=function(page,data,source){"task_edit"===page?s.task.tskEdit.id&&"refresh"!==source||(s.task.tskEdit=data,angular.copy(s.task.tskEdit,s.task.editTemp)):"task_settings"===page&&s.dtInstance&&s.dtInstance.reloadData(),s.flow.addControl(save,["task_edit","task_create"]),s.flow.addControl(deleteCtl,"task_edit"),s.flow.addControl(create,"task_settings")},s.deleteConfirm=function(){s.flow.action("delete",s.task.tskEdit,s.task.tskEdit.id),
fm.hide(s.flow.getElementFlowId("taskDeleteModal")),"task_settings"!==s.task.page.name&&s.flow.goToHome(),s.dtInstance&&s.dtInstance.reloadData()},s.deleteCancel=function(){fm.hide(s.flow.getElementFlowId("taskDeleteModal"))}}]).controller("mdCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","flowMessageService","flowModalService","$compile","sessionService",function(s,dto,dtc,ms,fm,c,ss){var create=new CreateControl;create.id="md_create_ctl",create.action=function(){s.task.mdCreate={},s.flow.goTo("md_create")};var save=new SaveControl;save.id="md_edit_ctl",save.action=function(){$("#"+s.flow.getElementFlowId("md_submit")).trigger("click")};var deleteCtl=new DeleteControl;deleteCtl.id="md_del_ctl",deleteCtl.action=function(){fm.show(s.flow.getElementFlowId("mdDeleteModal"))},s.dtOptions=new FlowOptionsGET(dto,s.flow.getHomeUrl(),s,c,ss),s.dtColumns=FlowColumns(dtc),s.dtColumns.push(dtc.newColumn("moduleName").withTitle("Name").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("moduleTitle").withTitle("Title").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("task").withTitle("Task URL").withOption("searchable",!1)),s.dtColumns.push(dtc.newColumn("moduleGlyph").withTitle("Glyph").notSortable().withOption("searchable",!1).renderWith(function(data){return"<span class='"+data+"'></span>"})),s.edit=function(id){s.task.mdEdit=void 0,s.task.editTemp={},s.flow.goTo("md_edit",id)},s["delete"]=function(id){fm.show(s.flow.getElementFlowId("mdDeleteModal")),s.http.get("services/flow_module_query/getInstance/",id).success(function(page){s.task.mdEdit=page})},s.save=function(){"md_edit"==s.task.page.name?angular.equals(s.task.mdEdit,s.task.editTemp)?s.flow.message.info(UI_MESSAGE_NO_CHANGE):s.flow.action("put",s.task.mdEdit,s.task.mdEdit.id):"md_create"===s.task.page.name&&s.flow.action("put",s.task.mdCreate)},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method?"md_edit"==s.task.page.name?(s.task.mdEdit={},angular.copy(s.task.mdEdit,s.task.editTemp),s.flow.goToHome()):"md_create"===s.task.page.name&&(s.task.mdCreate={},s.flow.goToHome()):"delete"===method&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,page,size){"md_settings"===page&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getRefreshId(),function(){s.dtInstance&&s.dtInstance.reloadData()}),s.flow.pageCallBack=function(page,data,source){"md_edit"===page?s.task.mdEdit&&"refresh"!==source||(s.task.mdEdit=data,angular.copy(s.task.mdEdit,s.task.editTemp)):"md_settings"===page&&s.dtInstance&&s.dtInstance.reloadData(),s.flow.addControl(save,["md_edit","md_create"]),s.flow.addControl(deleteCtl,"md_edit"),s.flow.addControl(create,"md_settings")},s.deleteConfirm=function(){s.flow.action("delete",s.task.mdEdit,s.task.mdEdit.id),fm.hide(s.flow.getElementFlowId("mdDeleteModal")),"md_settings"!==s.task.page.name&&s.flow.goToHome(),s.dtInstance&&s.dtInstance.reloadData()},s.deleteCancel=function(){fm.hide(s.flow.getElementFlowId("mdDeleteModal"))}}]).controller("moduleGroupCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","flowMessageService","flowModalService","$compile","sessionService",function(s,dto,dtc,ms,fm,c,ss){var create=new CreateControl;create.id="moduleGroup_create_ctl",create.action=function(){s.task.moduleGroupCreate={},s.flow.goTo("moduleGroup_create")};var save=new SaveControl;save.id="moduleGroup_edit_ctl",save.action=function(){$("#"+s.flow.getElementFlowId("moduleGroup_submit")).trigger("click")};var deleteCtl=new DeleteControl;deleteCtl.id="moduleGroup_del_ctl",deleteCtl.action=function(){fm.show(s.flow.getElementFlowId("moduleGroupDeleteModal"))},s.dtOptions=new FlowOptionsGET(dto,s.flow.getHomeUrl(),s,c,ss),s.dtColumns=FlowColumns(dtc),s.dtColumns.push(dtc.newColumn("name").withTitle("Name").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("title").withTitle("Title").withOption("searchable",!0)),s.dtColumns.push(dtc.newColumn("iconUri").withTitle("Glyph").withOption("searchable",!1)),s.edit=function(id){s.task.moduleGroupEdit={},s.task.editTemp={},s.flow.goTo("moduleGroup_edit",id)},s["delete"]=function(id){fm.show(s.flow.getElementFlowId("moduleGroupDeleteModal")),s.http.get("services/flow_task_group_query/getInstance/",id).success(function(page){s.task.moduleGroupEdit=page})},s.save=function(){"moduleGroup_edit"==s.task.page.name?angular.equals(s.task.moduleGroupEdit,s.task.editTemp)?s.flow.message.info(UI_MESSAGE_NO_CHANGE):s.flow.action("put",s.task.moduleGroupEdit,s.task.moduleGroupEdit.id):"moduleGroup_create"===s.task.page.name&&s.flow.action("put",s.task.moduleGroupCreate)},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method?"moduleGroup_edit"==s.task.page.name?(s.task.moduleGroupEdit={},angular.copy(s.task.moduleGroupEdit,s.task.editTemp),s.flow.goToHome()):"moduleGroup_create"===s.task.page.name&&(s.task.moduleGroupCreate={},s.flow.goToHome()):"delete"===method&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getResizeEventId(),function(event,page,size){"moduleGroup_settings"===page&&s.dtInstance&&s.dtInstance.reloadData()}),s.$on(s.flow.event.getRefreshId(),function(){s.dtInstance&&s.dtInstance.reloadData()}),s.flow.pageCallBack=function(page,data,source){"moduleGroup_edit"===page?s.task.moduleGroupEdit.id&&"refresh"!==source||(s.task.moduleGroupEdit=data,angular.copy(s.task.moduleGroupEdit,s.task.editTemp)):"moduleGroup_settings"===page&&s.dtInstance&&s.dtInstance.reloadData(),s.flow.addControl(save,["moduleGroup_edit","moduleGroup_create"]),s.flow.addControl(deleteCtl,"moduleGroup_edit"),s.flow.addControl(create,"moduleGroup_settings")},s.deleteConfirm=function(){s.flow.action("delete",s.task.moduleGroupEdit,s.task.moduleGroupEdit.id),fm.hide(s.flow.getElementFlowId("moduleGroupDeleteModal")),"moduleGroup_settings"!==s.task.page.name&&s.flow.goToHome(),s.dtInstance&&s.dtInstance.reloadData()},s.deleteCancel=function(){fm.hide(s.flow.getElementFlowId("moduleGroupDeleteModal"))}}]);var directives=angular.module("flowAppDirectives",["fluid"]);directives.directive("addPages",["flowHttpService","flowModalService","$compile","ngFileUpload",function(f,fm,c){return{scope:{task:"=",pageUrl:"@",targetList:"=",id:"@",disabled:"="},restrict:"AE",replace:!0,template:"<button ng-disabled='disabled' type='button' ng-click='look()' class='btn btn-info'>Add pages</button>",link:function(scope,element){scope.id||(scope.id="pg_pf_ed_"+scope.task.id);var parent=$(element[0]).parent().get(),modal=$("<div>").attr("id","{{id}}_pge_slt_mdl").addClass("modal fade fluid-modal").appendTo(parent).get(),modalContent=$("<div>").addClass("modal-dialog modal-lg").attr("id","{{id}}_mdl_cnt").appendTo(modal).get(),modalPanel=$("<div>").addClass("panel panel-default").appendTo(modalContent).get(),modalPanelHeading=$("<div>").addClass("panel-heading").appendTo(modalPanel).get(),inputGroup=($("<span>").addClass("text-info").addClass("col-lg-5 col-md-5 col-sm-3 col-xs-3").html("Select a page").appendTo(modalPanelHeading).get(),$("<div>").addClass("col-lg-7 col-md-7 col-sm-9 col-xs-9").addClass("input-group").appendTo(modalPanelHeading).get()),inputSpan=($("<input>").addClass("form-control").attr("type","text").attr("ng-model","search").appendTo(inputGroup).get(),$("<span>").addClass("input-group-addon").appendTo(inputGroup).get());$("<i>").addClass("fa fa-search").appendTo(inputSpan);var modalPanelBody=$("<div>").addClass("panel-body").attr("style","overflow:auto;height:200px").appendTo(modalPanel).get(),modalPanelFooter=$("<div>").addClass("panel-footer").attr("style","height:50px").appendTo(modalPanel).get(),pullRightFooterDiv=$("<div>").addClass("pull-right").appendTo(modalPanelFooter).get(),buttonGroup=$("<div>").addClass("btn-group btn-group-sm").appendTo(pullRightFooterDiv).get(),modalTable=($("<button>").addClass("btn btn-info").attr("ng-click","close()").attr("type","button").html("close").appendTo(buttonGroup).get(),$("<table>").addClass("table table-responsive table-hover").appendTo(modalPanelBody).get()),mThead=$("<thead>").appendTo(modalTable).get(),mTbody=($("<tr>").appendTo(mThead).get(),$("<tbody>").appendTo(modalTable).get()),mTr=$("<tr>").attr("ng-repeat","page in pages | filter:search").attr("ng-click","addToList(page)").appendTo(mTbody).get();$("<td>").html("{{page.name}}").appendTo(mTr).get();scope.close=function(){fm.hide(scope.id+"_pge_slt_mdl")},scope.addToList=function(page){for(var flowPermission={flowPageId:page.id,flowPageName:page.name,put:!0,get:!0,post:!0,del:!0},contains=!1,i=0;i<scope.targetList.length;i++){var fp=scope.targetList[i];if(fp.flowPageName===flowPermission.flowPageName){contains=!0;break}}contains?($(modalContent).addClass("shake"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("shake")})):(scope.targetList.push(flowPermission),scope.pages.splice(scope.pages.indexOf(page),1))},scope.look=function(){f.get(scope.pageUrl,scope.task).success(function(pages){scope.pages=pages,angular.forEach(scope.targetList,function(pp){angular.forEach(scope.pages,function(p,key){p.id===pp.flowPageId&&scope.pages.splice(key,1)})}),fm.show(scope.id+"_pge_slt_mdl")})},c(modal)(scope)}}}]),directives.directive("addAllPages",["flowHttpService",function(f){return{scope:{task:"=",pageUrl:"@",targetList:"=",id:"@",disabled:"="},restrict:"AE",replace:!0,template:"<button ng-disabled='disabled' type='button' ng-click='addAll()' class='btn btn-info'>Add all pages</button>",link:function(scope){scope.addAll=function(){f.get(scope.pageUrl,scope.task).success(function(pages){scope.pages=pages,angular.forEach(scope.pages,function(page){for(var flowPermission={flowPageId:page.id,flowPageName:page.name,put:!0,get:!0,post:!0,del:!0},contains=!1,i=0;i<scope.targetList.length;i++){var fp=scope.targetList[i];if(fp.flowPageName===flowPermission.flowPageName){contains=!0;break}}contains||(scope.targetList.push(flowPermission),scope.pages.splice(scope.pages.indexOf(page),1))})})}}}}]),directives.directive("fluidMenu",function($parse,$compile,$timeout,flowHttpService,flowFrameService,UserFactory){return{link:function($scope,element,attributes){$scope._menu={status:[],collapse:{},hover:[]},$scope.dataMap=[],$scope._menu.mouseleave=function(){for(var j=0;j<$scope._menu.hover.length;j++)$scope._menu.hover[j]=""},$scope._menu.mouseover=function(i){for(var j=0;j<$scope._menu.hover.length;j++)$scope._menu.hover[j]="";$scope._menu.hover[i]="nav-hover"},$scope._menu.collapse=function(i){$scope._menu.status[i]=!$scope._menu.status[i];var current=attributes.$$element.find("a[index="+i+"]");current.parent("li").addClass("active").siblings().removeClass("active").children("ul").each(function(){$scope._menu.status[$(this).attr("index")]=!0}),current.hasClass("btn-fullscreen")&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},$scope.$watch(function(scope){return UserFactory.isAuthenticated()},function(authenticated){if(authenticated){var groupLength=0,groups=UserFactory.getUser().flowGroups;groupLength=groups.length-1,angular.forEach(groups,function(group,index){var groupLi=$("<li>").appendTo(element[0]).get(),groupA=$("<a>").attr("href","#").appendTo(groupLi).get();if($("<i>").addClass(group.iconUri).appendTo(groupA).get(),$("<span>").addClass("menu-title").html(group.title).appendTo(groupA).get(),$("<span>").addClass("fa arrow").appendTo(groupA).get(),group.flowModules&&group.flowModules.length>0){var moduleLength=group.flowModules.length-1,subUl=$("<ul>").addClass("nav nav-second-level").appendTo(groupLi).get();angular.forEach(group.flowModules,function(module,index2){$scope.dataMap.push({name:module.moduleName,data:module});var subLi=$("<li>").appendTo(subUl).get(),subA=$("<a>").attr("href","#").attr("module",module.moduleName).appendTo(subLi).get();$("<i>").addClass(module.moduleGlyph).appendTo(subA).get(),$("<span>").addClass("submenu-title").html(module.moduleTitle).appendTo(subA).get(),groupLength===index&&moduleLength===index2&&($scope.loaded=!0)})}})}else $scope.loaded=!0}),$scope.openModule=function(moduleName){angular.forEach($scope.dataMap,function(data){moduleName===data.name&&(this.task=data.data.task)},$scope.data),$scope.data&&$scope.data.task&&flowFrameService.addTask($scope.data.task)},$scope.reload=function(){$timeout(function(){$scope.loaded?(attributes.$$element.find("li").children("a").each(function(index,value){var module=$(value).attr("module");$scope._menu.status[index]=!0,module?$(this).attr({"ng-click":"_menu.collapse("+index+');openModule("'+module+'")',index:index}):$(this).attr({"ng-click":"_menu.collapse("+index+")",index:index}),$(">ul",$(this).parent("li")).attr({collapse:"_menu.status["+index+"]",index:index})}),$(">li",attributes.$$element).each(function(index,value){$scope._menu.hover[index]="",$(this).attr({"ng-mouseleave":"_menu.mouseleave()","ng-mouseover":"_menu.mouseover("+index+")","ng-class":"_menu.hover["+index+"]"})}),$compile(element.contents())($scope)):$scope.reload()})},$scope.reload()}}}),directives.directive("fluidSubTaskbar",["flowFrameService","$timeout","$compile",function(f,t,c){return{restrict:"A",link:function(scope,element){var table=$("<table>").appendTo(element[0]).get(),tr=$("<tr>").appendTo(table).get();scope.loaded=!1,scope.$watch(f.taskList,function(){angular.forEach(f.taskList,function(task,index){if(index>9){var td=$("<td>").appendTo(tr).get(),a=$("<a>").attr("href","#").appendTo(td).get();$("<i>").addClass("fluid-bar-icon").addClass(task.glyph).appendTo(a),index%3===0&&(tr=$("<tr>").appendTo(table).get())}f.taskList.length-1===index&&(scope.loaded=!0)})}),scope.reload=function(){t(function(){scope.loaded?c(element.contens())(scope):scope.reload()})},scope.reload()}}}]),directives.directive("fluidReportTable",["$compile",function(c){return{scope:{table:"="},restrict:"AE",replace:!0,transclude:!0,template:"<div><ng-transclude></ng-transclude><table class='table table-condensed'></table></div>",link:function(scope,element,attr){scope.table={},scope.showHeaders=[];element.find("report-column")}}}]),directives.directive("fluidReportColumn",["$compile",function(c){return{scope:!0,link:function(scope,element,attr){if(attr.removable&&(scope.removable="true"===attr.removable),attr.headerTitle&&(scope.headerTitle=attr.headerTitle,scope.field=scope.headerTitle.replace(" ","")),attr["class"]&&(scope["class"]=attr["class"]),scope.removable){var th=$("<th>").addClass(scope["class"]).attr("name","removable_th_"+scope.field).attr("ng-init","table.is_"+scope.field+"=true").get();$("<input>").attr("type","checkbox").attr("ng-model","table.is_"+scope.field).appendTo(th).get(),element.append(th)}var th=$("<th>").addClass(scope["class"]).attr("name","th_"+scope.field).html(scope.headerTitle).get();element.append(th),c(element.contents())(scope)},restrict:"E",replace:!0,template:"<report-column></report-column>"}}]),directives.directive("fluidRenderWidth",[function(){return{restrict:"A",scope:{tableId:"@",headerName:"@"},link:function(scope,element,attr){scope.$watch(function(){var table=$("#"+scope.tableId);return table.find("th:contains('"+scope.headerName+"')").width()},function(newValue){var value=newValue+10;element.width(value)})}}}]),directives.directive("flowBarTooltip",["$timeout","flowFrameService","flowHttpService",function(t,f,f2){return{scope:{task:"=",index:"="},restrict:"A",link:function(scope,element,attr){if(scope.tooltipTime=400,void 0===scope.task)throw"Task object must be assigned.";attr.tooltipTime&&(scope.tooltipTime=attr.tooltipTime),attr.tooltipHeaderTitle&&(scope.tooltipHeaderTitle=attr.tooltipHeaderTitle),attr.tooltipPosition&&(scope.tooltipPosition=attr.tooltipPosition),attr.tooltipEvent&&(scope.tooltipEvent=attr.tooltipEvent),attr.tooltipMy&&(scope.my=attr.tooltipMy),attr.tooltipAt&&(scope.at=attr.tooltipAt),scope.tooltipPosition||(scope.tooltipPosition='{"my":"top center","at":"bottom center"}'),scope.tooltipEvent||(scope.tooltipEvent="hover"),void 0===scope.tooltipHeaderTitle&&(scope.tooltipHeaderTitle=scope.task.title),scope.position=JSON.parse(scope.tooltipPosition),scope.my&&(scope.position.my=scope.my),scope.at&&(scope.position.at=scope.at),scope.links=[],scope.$watch(function(scope){return scope.task.generic||f.fullScreen},function(newValue){if(scope.task.generic===!1){var content="<ul class='nav nav-pills nav-stacked'>";scope.task.pages&&angular.forEach(scope.task.pages,function(page){void 0!==page.pageLinkEnabled&&page.pageLinkEnabled===!0&&(content+="<li page='"+page.name+"'><a href='#' class='color-white' >"+page.title+"</a></li>")}),content+="<li><a href='#' class='color-white'>Minimize</a></li>",content+=f.fullScreen?"<li><a href='#' class='color-white'>Fluidscreen</a></li>":"<li><a href='#' class='color-white'>Fullscreen</a></li>",content+="<li><a href='#' class='color-white'>Close</a></li>",content+="</ul>",scope.tooltip=$(element[0]).qtip({content:{title:scope.tooltipHeaderTitle,text:content},position:{at:scope.position.at,my:scope.position.my,adjust:{method:"none shift"}},hide:{event:"click",inactive:scope.tooltipTime},style:"qtip-dark",events:{show:function(evt,api){var list=api.elements.tooltip.find("li").get();angular.forEach(list,function(li,index){var liElement=$(li);if("Minimize"===liElement.text())scope.task.active===!1?liElement.attr("style","display:none"):liElement.attr("style","display:block");else if("Close"===liElement.text());else{liElement.attr("page");scope.task.active===!1?liElement.attr("style","display:none"):liElement.attr("style","display:block")}api.elements.tooltip.find("li:eq("+index+")").click(function(event){var current=$(this);if(current.attr("page"))for(var page=current.attr("page"),p=0;p<scope.task.pages.length;p++){var pg=scope.task.pages[p];pg.name===page&&(f.fullScreen?(scope.task.currentPage={name:page},f.fullScreenTask=scope.task):(scope.task.currentPage={name:page},t(function(){$(".frame-content").scrollTo($("div.box[task]:eq("+scope.index+") div.flow-panel"),200)})),scope.$$phase||scope.$apply())}else"Minimize"===current.text()?scope.task.hide():"Close"===current.text()?scope.task.close():"Fullscreen"===current.text()?scope.task.fullScreen():"Fluidscreen"===current.text()&&scope.task.fluidScreen();api.toggle(!1)})})}}})}})}}}]),directives.directive("flowProfileVisible",["flowHttpService",function(f){return{restrict:"A",scope:{task:"=",profiles:"="},link:function(scope,iElement,iAttrs){f.post("services/flow_permission/has_profile",scope.profiles,scope.task).success(function(data){data?iElement.removeClass("hidden"):iElement.addClass("hidden")})}}}]),directives.directive("fallbackSrc",function(){var fallbackSrc={link:function(scope,iElement,iAttrs){iElement.bind("error",function(){angular.element(this).attr("src",iAttrs.fallbackSrc)})}};return fallbackSrc}),directives.directive("offset",[function(){return{restrict:"A",link:function(scope,element,attr){attr.offset&&(scope.offset=attr.offset),scope.offset&&element.addClass("col-lg-offset-"+scope.offset).addClass("col-md-offset-"+scope.offset).addClass("col-sm-offset-"+scope.offset).addClass("col-xs-offset-"+scope.offset)}}}]),directives.directive("button",[function(){return{restrict:"A",link:function(scope,iElement,iAttrs){iElement.addClass("btn"),iAttrs.info?(iElement.attr("type",iAttrs.info),iElement.addClass("btn-info")):iAttrs.warning?(iElement.attr("type",iAttrs.warning),iElement.addClass("btn-warning")):iAttrs.danger?(iElement.attr("type",iAttrs.danger),iElement.addClass("btn-danger")):iAttrs.primary?(iElement.attr("type",iAttrs.primary),iElement.addClass("btn-primary")):(iElement.attr("type","button"),iElement.addClass("btn-default"))}}}]),directives.directive("fluidIconSave",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-save")}}}),directives.directive("fluidIconAttach",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-paperclip")}}}),directives.directive("fluidIconEdit",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-edit")}}}),directives.directive("fluidIconNew",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-plus")}}}),directives.directive("fluidIconSearch",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-search")}}}),directives.directive("fluidIconTrash",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-trash-o")}}}),directives.directive("fluidIconDownload",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-download")}}}),directives.directive("fluidIconClose",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-close")}}}),directives.directive("fluidIconPrint",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-print")}}}),directives.directive("fluidIconClear",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-eraser")}}}),directives.directive("fluidIconNext",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-step-forward")}}}),directives.directive("fluidIconBack",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-step-backward")}}}),directives.directive("fluidIconNext",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-forward")}}}),directives.directive("fluidIconCheck",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-check text-success")}}}),directives.directive("fluidIconRefresh",function(){return{restrict:"A",link:function(scope,element,attr){element.addClass("fa fa-refresh"),scope.$watch(function(){return attr.loading},function(loading){loading&&("true"===loading?element.addClass("fa-spin"):element.removeClass("fa-spin"))})}}}),directives.directive("fluidIconSpinner",function(){return{restrict:"A",link:function(scope,element,attr){element.addClass("fa fa-spinner"),scope.$watch(function(){return attr.loading},function(loading){loading&&("true"===loading?element.addClass("fa-spin"):element.removeClass("fa-spin"))})}}}),directives.directive("fluidIconTag",function(){return{restrict:"A",link:function(scope,element){element.addClass("fa fa-tag")}}}),directives.directive("bgWeek1",function(){return{restrict:"A",link:function(scope,element,attr){var bgSpan=element.find("div[bg-div]");bgSpan.css("background","rgba(109,182,255,0.5)"),bgSpan.height(25),bgSpan.width(25),bgSpan.css("float","left"),element.css("float","right"),element.width(70),element.css("font-size",9),element.css("padding-top",-7)},template:"<div><div bg-div></div><span style='text-align:center'>Week 1</span></div>"}}),directives.directive("bgWeek2",function(){return{restrict:"A",link:function(scope,element,attr){var bgSpan=element.find("div[bg-div]");bgSpan.css("background","rgba(109,219,73,0.5)"),bgSpan.height(25),bgSpan.width(25),bgSpan.css("float","left"),element.css("float","right"),element.width(70),element.css("font-size",9),element.css("padding-top",-7)},template:"<div><div bg-div></div><span style='text-align:center'>Week 2</span></div>"}}),directives.directive("bgWeek3",function(){return{restrict:"A",link:function(scope,element,attr){var bgSpan=element.find("div[bg-div]");bgSpan.css("background","rgba(59,89,152,0.5)"),bgSpan.height(25),bgSpan.width(25),bgSpan.css("float","left"),element.css("float","right"),element.width(70),element.css("font-size",9),element.css("padding-top",-7)},template:"<div><div bg-div></div><span style='text-align:center'>Week 3</span></div>"}}),directives.directive("bgWeek4",function(){return{restrict:"A",link:function(scope,element,attr){var bgSpan=element.find("div[bg-div]");bgSpan.css("background","rgba(99,85,74,0.5)"),bgSpan.height(25),bgSpan.width(25),bgSpan.css("float","left"),element.css("float","right"),element.width(70),element.css("font-size",9),element.css("padding-top",-7)},template:"<div><div bg-div></div><span style='text-align:center'>Week 4</span></div>"}}),directives.directive("bgWeek5",function(){return{restrict:"A",link:function(scope,element,attr){var bgSpan=element.find("div[bg-div]");bgSpan.css("background","rgba(255,167,0,0.5)"),bgSpan.height(25),bgSpan.width(25),bgSpan.css("float","left"),element.css("float","right"),element.width(70),element.css("font-size",9),element.css("padding-top",-7)},template:"<div><div bg-div></div><span style='text-align:center'>Week 5</span></div>"}}),directives.directive("barChart",function(){return{restrict:"A",link:function(scope,element,attr){}}}),directives.directive("fluidPrintReport",["$compile",function(c){return{restrict:"A",scope:{printData:"="},link:function(scope,element,attr){element.unbind("click"),element.bind("click",function(e){if(scope.printData){var $printView=$("<div>");angular.forEach(scope.printData.regions,function($region,$index){var $printPanel=$("<div>");$printPanel.addClass("panel panel-primary");var $regionHeader=$("<div>");$regionHeader.addClass("panel-heading").addClass("text-center"),$regionHeader.html($region.region),$printPanel.append($regionHeader);var $panelBody=$("<div>");$panelBody.addClass("panel-body");var $agentTable=$("<table>");if($agentTable.addClass("table table-bordered table-condensed"),$agentTable.append($("<colgroup>").append($("<col>").attr("span",4)).append($("<col>").attr("span",12).addClass("months-header")).append($("<col>").attr("span",11).addClass("activity-header"))),scope.printData.labels){var $header=$("<thead>");$header.append($("<th>").css("font-size","9px").html("Top")),$header.append($("<th>").css("font-size","9px").html("Accounts")),angular.forEach(scope.printData.labels,function($label,$index){var $th=$("<th>");$th.css("font-size","9px"),$th.html($label),$header.append($th)}),$agentTable.append($header)}angular.forEach($region.agents,function($agent,$indexA){var $agentTableBody=$("<tbody>");$agentTableBody.append($("<tr>").append($("<td>").attr("colspan","27").addClass("bg-warning").html($agent.materialsAdvisor))),angular.forEach($agent.customers,function($customer,$indexC){var $ctr=$("<tr>").css("font-size","10px");$ctr.append($("<td>").addClass("text-center").html($customer.top?$customer.top:"Untagged")).append($("<td>").addClass("text-center").html($customer.label)),$agentTableBody.append($ctr),angular.forEach($customer.data,function($data,$indexD){$ctr.append($("<td>").addClass("text-center").html($data))})}),$agentTable.append($agentTableBody)}),$panelBody.append($agentTable),$printPanel.append($panelBody),$printView.append($printPanel)}),$printView.print({globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:$.Deferred()})}})}}}]),angular.module("fNotify",["fluid","truncate"]).directive("fnBar",["fnService","$timeout","flowHttpService","flowFrameService",function(fs,t,f,frs){return{restrict:"AE",replace:!0,templateUrl:"templates/fluid/fluidNotify.html",link:function(scope){scope.fs=fs,scope.openNotificationCenter=function(){var url="services/flow_task_service/getTask?name=notification&active=true&size=50&showToolBar=false";frs.addTask(url,void 0,!1)},scope.open=function(alert){f.putGlobal("session/notification/notify",alert);var url="services/flow_task_service/getTask?name=notification&active=true&size=50&showToolBar=false&page=notification_view&page-path="+alert.id;frs.addTask(url,void 0,!1)},scope.getMessageTypeGlyph=function(alert){if(alert.messageType){if("danger"===alert.messageType)return"fa fa-exclamation";if("info"===alert.messageType)return"fa fa-info";if("warning"===alert.messageType)return"fa fa-warning";if("success"===alert.messageType)return"fa fa-check"}},scope.getLabelScheme=function(alert){return"danger"===alert.messageType?"label label-danger":"info"===alert.messageType?"label label-info":"warning"===alert.messageType?"label label-warning":"success"===alert.messageType?"label label-success":void 0},f.getGlobal(scope.fs.url,!1).success(function(alerts){scope.fs.alerts=alerts}),f.getGlobal(scope.fs.topUrl,!1).success(function(top){scope.fs.top=top}),scope.notificationPoll=function(){f.getGlobal(scope.fs.url,!1).success(function(alerts){scope.fs.alerts=alerts,t(scope.notificationPoll,1e4)})},scope.topChecks=function(){f.getGlobal(scope.fs.topUrl,!1).success(function(top){scope.fs.top=top,t(scope.topChecks,1e4)})}}}}]).service("fnService",["flowFrameService",function(f){return this.alerts=[],this.top=[],this.limit=5,this.exceed=function(){return this.top.length>this.limit},this.enabled=!0,this.interval=function(alert){var today=new Date(alert.startDt);return jQuery.timeago(today)},this.openPage=function(alert){var url="services/flow_task_service/getTask?group-default=true&active=true&name="+alert.task;alert.page&&(url=url+"&page="+alert.page,alert.pageParam&&(url=url+"&page-path="+alert.pageParam)),f.addTask(url,void 0,!1)},this}]);var HOST="http://war.rexpublishing.com.ph:8080/rex-services/";angular.module("flowFactories",[]).constant("HOST",HOST).constant("VIEWER","vendors/ViewerJS/#").constant("REX_VERSION","1.3").constant("FLUID_VERSION","1.2c");var flowComponents=angular.module("fluid",["ngFileUpload","oc.lazyLoad","LocalStorageModule"]),EVENT_PAGE_SUCCESS="$onPageSuccess",EVENT_PAGE_ERROR="$onPageFailed";flowComponents.config(["$httpProvider","localStorageServiceProvider",function(h,ls){ls.setPrefix("fluid").setStorageType("sessionStorage").setNotify(!0,!0),h.defaults.headers.common={},h.defaults.headers.post={},h.defaults.headers.put={},h.defaults.headers.patch={},h.interceptors.push("flowInjector")}]),flowComponents.run(["$templateCache",function(tc){}]),flowComponents.directive("flowPanel",["flowFrameService","flowHttpService","$templateCache","$compile","flowMessageService","$rootScope","$q","$timeout","$ocLazyLoad","userProfile","sessionService",function(f,f2,tc,c,ms,rs,q,t,oc,up,ss){return{scope:{task:"="},restrict:"E",template:tc.get("templates/fluid/fluidPanel.html"),replace:!0,link:{pre:function(scope,element){scope.pathRegexPattern=/{[\w|\d]*}/,scope.generateUrl=function(url,param){isJson(param)&&(param=JSON.parse(param));for(var key in param)if(param.hasOwnProperty(key)){var reg=new RegExp("{"+key+"}","g");url=url.replace(reg,param[key])}return url},scope.flowFrameService=f,scope.userTask={},scope.userTask.closed=!1,scope.flow={},scope.task.toolbars=[{id:"home",glyph:"fa fa-home",label:"home",disabled:!1,uiType:"info",action:function(){scope.flow.goToHome()}},{id:"back",glyph:"fa fa-arrow-left",label:"back",disabled:!0,uiType:"info",action:function(){if(scope.task.navPages.length>0&&scope.task.navPages.length>scope.currentPageIndex){var i=--scope.currentPageIndex,count=scope.task.navPages.length-(i+1),page=scope.task.navPages[i];scope.task.navPages.splice(i+1,count),scope.flow.navTo(page.name)}else this.disabled=!0}},{id:"forward",glyph:"fa fa-arrow-right",label:"forward",disabled:!0,uiType:"info",action:function(){if(scope.task.navPages.length-1>scope.currentPageIndex){var page=scope.task.navPages[++scope.currentPageIndex];scope.flow.navTo(page.name)}else this.disabled=!0}}],scope.flow.event={},scope.flow.message={},scope.flow.message.duration=3e3,scope.http={},scope.currentPageIndex=0,scope.flow.onPageChanging=function(page,param){
return!0},scope.flow.onRefreshed=function(){},scope.flow.onOpenPinned=function(page,param){},scope.flow.navToTask=function(task){var $index={index:0};angular.forEach(f.taskList,function(tsk,index){tsk.id===task.id&&(this.index=index)},$index),t(function(){$(".frame-content").scrollTo($("div.box[task]:eq("+$index.index+") div"),200)})},scope.flow.openTaskBaseUrl="services/flow_task_service/getTask?",scope.flow.openTask=function(name,page,param,newTask,origin,size){var url=scope.flow.openTaskBaseUrl;url+=size?"size="+size+"&":"size=100&",url+="active=true&name="+name,page&&(url+="&page="+page),param&&(url+="&page-path="+param),newTask&&(url+="&newTask="+newTask),f.addTask(url,origin?origin:scope.task,!0)};element.parent();scope.flow.getHomeUrl=function(){return f2.host+scope.homeUrl},scope.flow.getElementFlowId=function(id){return id+"_"+scope.task.id},scope.flow.getEventId=function(id){return id+"_fp_"+scope.task.id},scope.flow.event.getResizeEventId=function(){return scope.flow.getEventId("rsz_evt_id_")},scope.flow.event.getPageCallBackEventId=function(){return"task_flow_page_call_back_event_id_"+scope.task.id},scope.flow.event.getOnTaskLoadedEventId=function(){return scope.flow.getEventId("on_ld_tsk_evt_id_")},scope.flow.event.getGoToEventId=function(){return goToEventID+scope.task.id},scope.flow.event.getRefreshId=function(){return scope.flow.getEventId("tsk_rfh_id_")},scope.flow.event.getSuccessEventId=function(){return scope.flow.getEventId("suc_evt_id_")},scope.flow.event.getErrorEventId=function(){return scope.flow.getEventId("err_evt_id_")};var messageId=scope.flow.getElementFlowId("pnl_msg");scope.flow.message.info=function(msg){ms.info(messageId,msg,scope.flow.message.duration).open()},scope.flow.message.warning=function(msg){ms.warning(messageId,msg,scope.flow.message.duration).open()},scope.flow.message.danger=function(msg){ms.danger(messageId,msg,scope.flow.message.duration).open()},scope.flow.message.success=function(msg){ms.success(messageId,msg,scope.flow.message.duration).open()},scope.flow.controls=void 0,scope.http.get=function(url,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2.get(url,scope.task)},scope.http["delete"]=function(url,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2["delete"](url,scope.task)},scope.http.post=function(url,data,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2.post(url,data,scope.task)},scope.http.put=function(url,data,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2.put(url,data,scope.task)},scope.loadProperties=function(){scope.flow.controls&&angular.forEach(scope.flow.controls,function(control){control.pages&&scope.flow.addControl(control,control.pages)})},scope.loadGet=function(){return rs.$$phase||scope.$apply(),scope.task.prevPage&&scope.task.prevPage.destroy&&scope.task.prevPage.destroy(),q(function(resolve,reject){if(void 0!==scope.task.page&&null!==scope.task.page&&null!==scope.task.page.autoGet&&scope.task.page.autoGet===!0){scope.task.currentPage=scope.task.page.name;var url=scope.homeUrl;scope.task.page.getParam&&(url=scope.homeUrl.search(scope.pathRegexPattern)>0?scope.generateUrl(scope.homeUrl,scope.task.page.getParam):scope.homeUrl+scope.task.page.getParam),f2.get(url,scope.task).success(function(data){resolve({page:scope.task.page.name,value:data})})}else void 0===scope.task.page||null===scope.task.page||null!==scope.task.page.autoGet&&scope.task.page.autoGet!==!1||(scope.task.currentPage=scope.task.page.name,resolve({page:scope.task.page.name}))}).then(function(data){scope.task.pageLoaded=!0;var pagePanel=element.find(".flow-panel-page");pagePanel.html("<fluid-include url=\"{{task.page.home}}\" name='{{flow.getElementFlowId(task.page.name)}}' taskid='{{task.id}}'></fluid-include>"),c(pagePanel.contents())(scope),scope.onLoad=function(){scope.task.pinned?(scope.task.loaded=!0,scope.flow.onOpenPinned(scope.task.page,scope.task.pageParam)):!scope.task.page.load&&scope.flow.pageCallBack?(scope.flow.pageCallBack(data.page,data.value),rs.$$phase||scope.$apply(),scope.task.loaded=!0):(scope.task.page.load&&scope.task.page.load(data.value),rs.$$phase||scope.$apply(),scope.task.loaded=!0),scope.loadProperties()}},function(response){scope.task.pageLoaded=!0,scope.task.loaded=!0;var pagePanel=element.find(".flow-panel-page");pagePanel.html("<fluid-include url='{{task.page.home}}' name='{{flow.getElementFlowId(task.page.name)}}' taskid='{{task.id}}'></fluid-include>"),c(pagePanel.contents())(scope)})},scope.$on(EVENT_PAGE_SUCCESS,function(event,name,taskId){var current=scope.flow.getElementFlowId(scope.task.page.name);taskId!==scope.task.id||scope.task.loaded||((void 0===scope.task.preLoaded||scope.task.preLoaded===!1)&&(scope.task.preLoad(),scope.task.preLoaded=!0),scope.task.preLoaded&&(scope.task.load(),scope.task.loaded=!0),scope.task.postLoad()),name===current&&(scope.onLoad?scope.onLoad():scope.loadProperties(),scope.task.taskLoadRetryCount=0)}),scope.flow.addControl=function(control,pageName){var exists=!1;if(angular.forEach(scope.task.toolbars,function(ctl){control.id===ctl.id&&(exists=!0)}),Array.isArray(pageName)){var index=pageName.indexOf(scope.task.page.name);if(index>-1)exists||scope.task.toolbars.push(control);else if(exists)for(var t=scope.task.toolbars.length-1;t>0;t--){var toolbar=scope.task.toolbars[t];toolbar.id===control.id&&scope.task.toolbars.splice(t,1)}}else if(scope.task.page.name===pageName)exists||scope.task.toolbars.push(control);else if(exists)for(var t=scope.task.toolbars.length-1;t>0;t--){var toolbar=scope.task.toolbars[t];if(toolbar.id===control.id){scope.task.toolbars.splice(t,1);break}}},scope.navToPage=function(name){return q(function(resolve){angular.forEach(scope.task.navPages,function(page){if(name===page.name){scope.task.prevPage=scope.task.page,scope.task.page=page;var uri=page.get;void 0!==scope.task.page.param&&null!=scope.task.page.param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,scope.task.page.param):uri+=scope.task.page.param),scope.homeUrl=uri,scope.task.pinned===!0&&(scope.userTask.page=scope.task.page.name,scope.userTask.param=scope.task.page.param,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,scope.userTask.pinned=scope.task.pinned,f2.post("services/flow_user_task_crud/save_task_state?field=pin",scope.userTask,scope.task)));for(var i=0;i<scope.task.navPages.length;i++)if(scope.task.navPages[i].name===name){scope.currentPageIndex=i;break}for(var i=0;i<scope.task.toolbars.length;i++)"back"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!(scope.currentPageIndex>0)),"forward"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!(scope.currentPageIndex<scope.task.navPages.length-1));resolve()}})})},scope.flow.navTo=function(name){return scope.flow.onPageChanging(name)?scope.navToPage(name).then(scope.loadGet()):void 0},scope.getToPage=function(name,param){return q(function(resolve,reject){angular.forEach(scope.task.pages,function(page){if(name===page.name){scope.task.prevPage={},angular.copy(scope.task.page,scope.task.prevPage),scope.task.page=page;var uri=page.get;void 0!==param&&"null"!==param?(page.param=param,uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param):page.param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),scope.homeUrl=uri,scope.task.pinned===!0&&(scope.userTask.page=scope.task.page.name,scope.userTask.param=scope.task.page.param,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,scope.userTask.pinned=scope.task.pinned,f2.post("services/flow_user_task_crud/save_task_state?field=pin",scope.userTask,scope.task)));for(var contains=!1,i=0;i<scope.task.navPages.length;i++)if(scope.task.navPages[i].name===name){contains=!0,scope.currentPageIndex=i;break}contains===!1&&(scope.task.navPages.push(page),scope.currentPageIndex=scope.task.navPages.length-1);for(var i=0;i<scope.task.toolbars.length;i++)"back"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!(scope.currentPageIndex>0)),"forward"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!(scope.currentPageIndex<scope.task.navPages.length-1));resolve()}})})},scope.flow.goTo=function(name,param){return scope.flow.onPageChanging(name,param)?scope.getToPage(name,param).then(scope.loadGet()):void 0},scope.$watch(function(scope){return scope.task.currentPage},function(newValue){newValue&&scope.flow.goTo(newValue.name,newValue.param)}),scope.flow.action=function(method,data,param){if(method){var uri="";"put"===method.toLowerCase()?(uri=scope.task.page.put,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2.put(uri,data,scope.task).success(function(rv){rs.$broadcast(scope.flow.event.getSuccessEventId(),rv,method)}).error(function(data){data?scope.flow.message.danger(data.msg):scope.flow.message.danger("Error creating request to "+uri),rs.$broadcast(scope.flow.event.getErrorEventId(),data,method)})):"get"===method.toLowerCase()?(uri=scope.task.page.get,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2.get(uri,scope.task).success(function(rv){rv&&rv.msg&&scope.flow.message.success(rv.msg),rs.$broadcast(scope.flow.event.getSuccessEventId(),rv,method)}).error(function(data){data&&scope.flow.message.danger(data.msg),rs.$broadcast(scope.flow.event.getErrorEventId(),data,method)})):"delete"===method.toLowerCase()?(uri=scope.task.page.delURL,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2["delete"](uri,scope.task).success(function(rv){rv&&(rv&&rv.msg&&scope.flow.message.success(rv.msg),rs.$broadcast(scope.flow.event.getSuccessEventId(),rv,method))}).error(function(data){data&&scope.flow.message.danger(data.msg),rs.$broadcast(scope.flow.event.getErrorEventId(),data,method)})):"post"===method.toLowerCase()&&(uri=scope.task.page.post,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2.post(uri,data,scope.task).success(function(rv){rv&&rv.msg&&scope.flow.message.success(rv.msg),rs.$broadcast(scope.flow.event.getSuccessEventId(),rv,method)}).error(function(data){data&&scope.flow.message.danger(data.msg),rs.$broadcast(scope.flow.event.getErrorEventId(),data,method)}))}},scope.flow.goToHome=function(){angular.forEach(scope.task.pages,function(page){if(page.isHome){scope.task.page=page,scope.homeUrl=page.get,page.param&&(scope.homeUrl=scope.homeUrl+page.param);for(var i=0;i<scope.task.toolbars.length;i++)"back"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!0),"forward"===scope.task.toolbars[i].id&&(scope.task.toolbars[i].disabled=!0);scope.currentPageIndex=0,scope.task.navPages=[page],scope.loadGet()}})},scope.$watch(function(scope){return scope.task},function(task){if(task&&task.generic)if(scope.task.page=void 0,scope.baseTask=ss.getSessionProperty(scope.task.url),scope.baseTask){var newTask=scope.task.newTask,$task={};scope.copy={},angular.copy(scope.task,scope.copy),f.fullScreen?(scope.task=f.buildTask(scope.baseTask),scope.task.id="fullscreen_"+scope.baseTask.id):(angular.forEach(f.taskList,function(task,key){task.id===scope.task.id&&(this.task=task,this.index=key)},$task),f.taskList[$task.index]=f.buildTask(scope.baseTask),f.taskList[$task.index].id=f.taskList[$task.index].id+"_"+$task.index,f.taskList[$task.index].origin=scope.task.origin,scope.task=f.taskList[$task.index]),scope.task.generic=!1,scope.task.newTask=newTask,scope.task.flowHttpService=f2}else f2.get(scope.task.url,scope.task).success(function(d){ss.addSessionProperty(scope.task.url,d);var newTask=scope.task.newTask,$task={};scope.copy={},angular.copy(scope.task,scope.copy),f.fullScreen?(scope.task=f.buildTask(d),scope.task.id="fullscreen_"+d.id):(angular.forEach(f.taskList,function(task,key){task.id===scope.task.id&&(this.task=task,this.index=key)},$task),f.taskList[$task.index]=f.buildTask(d),f.taskList[$task.index].id=f.taskList[$task.index].id+"_"+$task.index,f.taskList[$task.index].origin=scope.task.origin,scope.task=f.taskList[$task.index]),scope.task.generic=!1,scope.task.newTask=newTask,scope.task.flowHttpService=f2})})},post:function(scope,element){var parent=element.parent();scope.$on(scope.flow.getEventId("navTo"),function(event,name){scope.flow.navTo(name)}),scope.$on(scope.flow.getEventId("selectPage"),function(event,name){for(var i=scope.currentPageIndex,index=0;i<scope.task.navPages.length;i++)if(scope.task.navPages[index].name==name){i=index;break}var count=scope.task.navPages.length-(i+1),page=scope.task.navPages[i];scope.task.navPages.splice(i+1,count),scope.flow.navTo(name),scope.task.page=page}),scope.$on(scope.flow.event.getGoToEventId(),function(event,name,param){scope.flow.goTo(name,param)}),scope.$on(scope.flow.event.getOnTaskLoadedEventId(),function(event){}),scope.$on(EVENT_NOT_ALLOWED+scope.task.id,function(event,msg){scope.flow.message.danger(msg),angular.forEach(scope.task.navPages,function(page,key){page.name===scope.task.navPages.name&&(scope.task.navPages.splice(key,1),scope.flow.goTo(scope.task.prevPage.name))})}),scope.$watch(function(scope){return scope.task?scope.task:void 0},function(task){if(task){if(task.generic===!1){if(task.lazyLoad===!0){var pathArr=void 0;task.moduleFiles.indexOf(",")>0&&(pathArr=task.moduleFiles.split(","));var files=[];if(pathArr)for(var i=0;i<pathArr.length;i++)files.push(pathArr[i]);else files.push(task.moduleFiles);oc.load({name:task.moduleJS,files:files,cache:!0}).then(function(){generateTask(scope,t,f2)})}else t(function(){generateTask(scope,t,f2)});scope.task.refresh=function(){scope.task.page.autoGet?(scope.task.loaded=!1,f2.get(scope.homeUrl,scope.task).success(function(data){scope.task.page.load&&scope.task.page.load(data,"refresh"),scope.flow.pageCallBack&&scope.flow.pageCallBack(scope.task.page.name,data,"refresh"),scope.task.loaded=!0}).error(function(data){scope.task.loaded=!0})):(rs.$broadcast(scope.flow.event.getRefreshId()),scope.flow.onRefreshed())},scope.task.max25=function(clientState){scope.task.size=25,parent.removeClass("col-lg-12"),parent.removeClass("col-lg-8"),parent.removeClass("col-lg-6"),parent.addClass("col-lg-4"),(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.flow.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,f2.post("services/flow_user_task_crud/save_task_state?field=size",scope.userTask,scope.task).then(function(){t(function(){generateTask(scope,t,f2)})})))},scope.task.max50=function(clientState){scope.task.size=50,parent.removeClass("col-lg-12"),parent.removeClass("col-lg-8"),parent.removeClass("col-lg-4"),parent.addClass("col-lg-6"),(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.flow.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,f2.post("services/flow_user_task_crud/save_task_state?field=size",scope.userTask,scope.task).then(function(){t(function(){generateTask(scope,t,f2)})})))},scope.task.max75=function(clientState){scope.task.size=75,parent.removeClass("col-lg-12"),parent.removeClass("col-lg-6"),parent.removeClass("col-lg-4"),parent.addClass("col-lg-8"),(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.flow.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,f2.post("services/flow_user_task_crud/save_task_state?field=size",scope.userTask,scope.task)))},scope.task.max100=function(clientState){scope.task.size=100,parent.removeClass("col-lg-8"),parent.removeClass("col-lg-6"),parent.removeClass("col-lg-4"),parent.addClass("col-lg-12"),(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.flow.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,f2.post("services/flow_user_task_crud/save_task_state?field=size",scope.userTask,scope.task).then(function(){t(function(){generateTask(scope,t,f2)})})))},scope.task.hide=function(){scope.task.onWindowHiding(scope.task.page)&&(scope.flowFrameService.fullScreen&&scope.task.fluidScreen(),scope.task.active=!1,scope.userTask.active=scope.task.active,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,f2.post("services/flow_user_task_crud/save_task_state?field=active",scope.userTask,scope.task)))},scope.task.close=function(){scope.task.onWindowClosing(scope.task.page)&&scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.closed=!0,scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,f2.post("services/flow_user_task_crud/save_task_state?field=close",scope.userTask,scope.task).success(function(data){for(var i=0;i<f.taskList.length;i++){var task=f.taskList[i];scope.task.id===task.id&&f.taskList.splice(i,1),scope.flowFrameService.fullScreen&&scope.task.fluidScreen(),rs.$$phase||scope.$apply()}}).error(function(data){}).then(function(data){scope.$destroy()}))},scope.task.pin=function(){scope.task.pinned=!scope.task.pinned,scope.task.pinned===!0?(scope.userTask.page=scope.task.page.name,scope.userTask.param=scope.task.page.param,scope.task.onWindowPinned(scope.task.page)):(scope.userTask.page="",scope.userTask.param=""),scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.flowTaskId=scope.task.id.split("_")[0],scope.userTask.flowId=scope.task.flowId,scope.userTask.pinned=scope.task.pinned,f2.post("services/flow_user_task_crud/save_task_state?field=pin",scope.userTask,scope.task))},scope.task.fullScreen=function(){f.toggleFullscreen(scope.task),rs.$$phase||scope.$apply()},scope.task.fluidScreen=function(){f.toggleFluidscreen(),rs.$$phase||scope.$apply()},scope.task&&!scope.flowFrameService.fullscreen&&scope.task.size&&("25"==scope.task.size?scope.task.max25(!0):"50"==scope.task.size?scope.task.max50(!0):"75"==scope.task.size?scope.task.max75(!0):"100"==scope.task.size&&scope.task.max100(!0))}scope.flowFrameService.fullScreen&&(parent.addClass("col-lg-12"),parent.removeClass("col-lg-8"),parent.removeClass("col-lg-4"),parent.removeClass("col-lg-6"))}}),scope.$watch(function(scope){return!scope.task.generic&&scope.flowFrameService.fullScreen},function(fullScreen){if(fullScreen){var height=window.innerHeight;height=estimateHeight(height)-50;var panel=$("#_id_fp_"+scope.task.id+".portlet"),panelBody=panel.find(".portlet-body");panel.height(height);var headerHeight=panel.find("div.portlet-header").height();panelBody.height(height-headerHeight),panelBody.css("overflow","auto")}if(scope.task.generic===!1){scope.task.loaded=!1;var loadGetFn=function(){scope.task&&(scope.task.preLoad(),scope.task.preLoaded=!0,scope.loadGet(),scope.task.preLoaded&&(scope.task.load(),scope.task.loaded=!0),scope.task.postLoad())};loadGetFn()}}),$(window).on("resize",function(){if(scope.flowFrameService.fullScreen){var height=window.innerHeight;height=estimateHeight(height)-50,scope.flowFrameService.getFrame().css("overflow","hidden");var panel=$("#_id_fp_"+scope.task.id+".portlet"),panelBody=panel.find(".portlet-body");panel.height(height);var headerHeight=panel.find("div.portlet-header").height();panelBody.height(height-headerHeight),panelBody.css("overflow","auto")}}),element.ajaxStart(function(){t(function(){scope.task.loaded=!1})}),element.ajaxStop(function(){t(function(){scope.task.loaded=!0})})}}}}]).directive("flowFrame",["flowFrameService","$window","$rootScope","$timeout","$templateCache",function(f,w,rs,t,tc){return{restrict:"E",transclude:!0,scope:!0,template:tc.get("templates/fluid/fluidFrame.html"),replace:!0,link:function(scope,element){scope.frame={},scope.flowFrameService=f,scope.$watch(function(scope){return scope.flowFrameService.fullScreen},function(fullScreen){var frameDiv=$(element.find("div.form-group")[1]);if(fullScreen){var height=window.innerHeight;height=estimateHeight(height),scope.flowFrameService.isSearch}else{var height=window.innerHeight;height=estimateHeight(height),scope.flowFrameService.isSearch?frameDiv.attr("style","height:"+height+"px;overflow:auto"):element.attr("style","height:"+height+"px;overflow:auto"),$("body").attr("style","height: "+height+"px;overflow:hidden")}}),scope.show=function(task){task.pinned||(task.active=!task.active)},$(window).on("resize",function(){if(scope.flowFrameService.fullScreen){var height=window.innerHeight;height=estimateHeight(height),scope.flowFrameService.isSearch?frameDiv.attr("style","height:"+height+"px;overflow:hidden"):element.attr("style","height:"+height+"px;overflow:hidden")}else{var height=window.innerHeight;height=estimateHeight(height),scope.flowFrameService.isSearch?frameDiv.attr("style","height:"+height+"px;overflow:auto"):element.attr("style","height:"+height+"px;overflow:auto")}$("body").attr("style","height: "+height+"px;overflow:hidden")}),scope.initTask=function(task){task&&scope.$watch(function(){return task.active},function(newValue,oldValue){!0===newValue&&(task.onWindowOpening?task.onWindowOpened():task.active=!1)})}}}}]).directive("flowTool",["$rootScope","$compile","$templateCache",function(r,c,tc){return{scope:{task:"=",controls:"=",pages:"=",flow:"=",size:"@"},restrict:"E",replace:!0,template:tc.get("templates/fluid/fluidToolbar.html"),link:function(scope,element,attr){attr.size?"small"===attr.size?scope.size="btn-group-xs":"medium"===attr.size?scope.size="btn-group-sm":"large"===attr.size&&(scope.size="btn-group-md"):scope.size="btn-group-md",scope.runEvent=function(control){if(control.action)control.action();else{var event=control.id+"_fp_"+scope.task.id;r.$broadcast(event)}},scope.goToEvent=function(name,param){scope.flow.navTo(name)},scope.getClass=function(uiType){return"info"===uiType.toLowerCase()?"btn-info":"danger"===uiType.toLowerCase()?"btn-danger":"warning"===uiType.toLowerCase()?"btn-warning":"inverse"===uiType.toLowerCase()?"btn-inverse":"success"===uiType.toLowerCase()?"btn-success":"primary"===uiType.toLowerCase()?"btn-primary":"btn-default"}}}}]).directive("flowBar",["flowFrameService","$templateCache","$compile","flowHttpService",function(f,tc,c,f2){return{restrict:"AEC",link:function(scope,element){scope.taskList=f.taskList,scope.open=function(task){task.active===!0?scope.scroll(task):(task.active=!0,-1===task.id.indexOf("gen")&&(scope.userTask={},scope.userTask.flowTaskId=task.id.split("_")[0],scope.userTask.active=task.active,scope.userTask.flowId=task.flowId,f2.post("services/flow_user_task_crud/save_task_state?field=active",scope.userTask,task)))},scope.scroll=function(task){$("body").scrollTo($("#_id_fp_"+task.id),800)}},replace:!0,template:tc.get("templates/fluid/fluidBar2.html")}}]).directive("flowField",["$templateCache",function(tc){return{restrict:"AE",scope:{name:"@",model:"=",label:"@",type:"@",required:"=",disabled:"=",blur:"&"},template:tc.get("templates/fluid/fluidField.html"),replace:!0,link:function(scope,elem,attr){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.type&&(scope.type="text")}}}]).directive("flowTextArea",["$templateCache",function(tc){return{restrict:"AE",scope:{name:"@",model:"=",label:"@",required:"=",disabled:"=",rows:"=",cols:"="},template:tc.get("templates/fluid/fluidTextArea.html"),replace:!0,link:function(scope,elem,attr){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_"))}}}]).directive("flowCheck",["$compile","$templateCache",function(c,tc){return{restrict:"AE",scope:{model:"=",label:"@",required:"=",disabled:"=",name:"@"},template:tc.get("templates/fluid/fluidCheckbox.html"),link:function(scope){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.required&&(scope.required=!1),void 0===scope.disabled&&(scope.disabled=!1),void 0===scope.model&&(scope.model=!1),scope.update=function(){(void 0===scope.disabled||scope.disabled===!1||null===scope.disabled)&&(scope.model=!scope.model)}},replace:!0}}]).directive("flowMessage",[function(){return{restrict:"AE",replace:!0,template:"<div></div>"}}]).directive("flowModal",["flowFrameService","$templateCache",function(f,tc){return{restrict:"AE",template:tc.get("templates/fluid/fluidModal.html"),replace:!0,transclude:!0,link:function(scope,element,attr){scope.flowFrameService=f,scope.style={},attr.height&&(scope.style.height=attr.height),attr.width&&(scope.style.width=attr.width)}}}]).directive("flowSubTable",["$compile","flowModalService","flowHttpService","flowFrameService","$rootScope",function(c,fm,f,f2,rs){return{restrict:"AE",transclude:!0,replace:!0,scope:{task:"=",flow:"=",lookUp:"@",targetList:"=",targetUrl:"@",id:"@",title:"@",keyVar:"@",idField:"@",sourceUrl:"@",editUrl:"@",editEvent:"@",createEvent:"@"},template:"<div class='form-group'><div class='panel panel-primary'><div class='panel-heading'><a href='#' class='flow-panel-heading-title' data-toggle='collapse' data-target='#{{id}}_collapse'>{{title}}</a><div class='pull-right'><div class='btn-group btn-group-xs'><button type='button' class='btn btn-info flow-sub-table-control' ng-click='create()' ng-show='createEnabled'><span class='fa fa-plus'></span></button><button ng-show=\"lookUp == 'true'\" type='button' class='btn btn-info flow-sub-table-control' ng-click='look()'><span class='fa fa-search'></span></button></div></div></div><div class='panel-collapse collapse in' id='{{id}}_collapse'><div class='panel-body' ><div ng-transclude></div><div class='container-fluid' style='overflow-y: auto'><table class='table table-responsive table-hover'></table></div></div></div></div>",link:function(scope,element){if(scope.lookUp||(scope.lookUp="true"),scope.createEvent?scope.createEnabled=!0:scope.createEnabled=!1,scope.editEvent||scope.editUrl?scope.editEnabled=!0:scope.editEnabled=!1,void 0===scope.id){var parent=$(element[0]).parent(),size=$(parent).find("flow-sub-table").length;scope.id="sb_tbl_"+size+"_"+scope.task.id}scope.targetList||(scope.targetList=[]);var parent=$(element[0]).parent().get(),modal=$("<div>").attr("id","{{id}}_add_tbl_mdl").addClass("modal fade fluid-modal").appendTo(parent).get(),modalContent=$("<div>").addClass("modal-dialog modal-lg").attr("id","{{id}}_mdl_cnt").appendTo(modal).get(),modalPanel=$("<div>").addClass("panel panel-primary").appendTo(modalContent).get(),modalPanelHeading=$("<div>").addClass("panel-heading").appendTo(modalPanel).get(),inputGroup=($("<span>").addClass("text-inverse").addClass("col-lg-5 col-md-5 col-sm-3 col-xs-3").html("Select "+scope.title).appendTo(modalPanelHeading).get(),$("<div>").addClass("col-lg-7 col-md-7 col-sm-9 col-xs-9").addClass("input-group").appendTo(modalPanelHeading).get()),inputSpan=($("<input>").addClass("form-control").attr("type","text").attr("ng-model","search").appendTo(inputGroup).get(),$("<span>").addClass("input-group-addon").appendTo(inputGroup).get());$("<i>").addClass("fa fa-search").appendTo(inputSpan);var modalPanelBody=$("<div>").addClass("panel-body").attr("style","overflow:auto;height:200px").appendTo(modalPanel).get(),modalPanelFooter=$("<div>").addClass("panel-footer").attr("style","height:50px").appendTo(modalPanel).get(),pullRightFooterDiv=$("<div>").addClass("pull-right").appendTo(modalPanelFooter).get(),buttonGroup=$("<div>").addClass("btn-group btn-group-sm").appendTo(pullRightFooterDiv).get(),columns=($("<button>").addClass("btn btn-info").attr("ng-click","close()").attr("type","button").html("close").appendTo(buttonGroup).get(),element.find("flow-sub-column")),table=element.find("table"),thead=$("<thead>").appendTo(table).get(),theadRow=$("<tr>").appendTo(thead).get(),tbody=$("<tbody>").appendTo(table).get(),modalTable=$("<table>").addClass("table table-responsive table-hovered table-bordered").appendTo(modalPanelBody).get(),mThead=$("<thead>").appendTo(modalTable).get(),mTheadRow=$("<tr>").appendTo(mThead).get(),mTbody=$("<tbody>").appendTo(modalTable).get(),tr=$("<tr>").addClass("animated").addClass("slideInDown").addClass("anim-dur").attr("ng-repeat",scope.keyVar+" in targetList").appendTo(tbody).get(),mTr=$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","addToList("+scope.keyVar+")").appendTo(mTbody).get();void 0!==scope.targetUrl&&f.get(scope.targetUrl,scope.task).success(function(data){scope.targetList=data}),$("<th>").html("Action").appendTo(theadRow);var tdAction=$("<td>").appendTo(tr).get(),buttonGroupDiv=$("<div>").addClass("btn-group").addClass("btn-group-xs").appendTo(tdAction).get();if(scope.editEnabled){$("<button>").addClass("btn btn-info").addClass("glyphicon glyphicon-edit").addClass("horizontalSpace").attr("type","button").attr("title","edit").attr("ng-click","edit("+scope.keyVar+"."+scope.idField+",$index)").appendTo(buttonGroupDiv).get()}for(var i=($("<button>").addClass("btn btn-danger").addClass("glyphicon glyphicon-minus").addClass("horizontalSpace").attr("type","button").attr("title","remove").attr("ng-click","remove($index)").appendTo(buttonGroupDiv).get(),0);i<columns.length;i++){var col=$(columns[i]);$("<th>").addClass(col.attr("column-class")).html(col.attr("title")).appendTo(theadRow),$("<th>").addClass(col.attr("column-class")).html(col.attr("title")).appendTo(mTheadRow),void 0!==col.attr("render-with")?($("<td>").addClass(col.attr("column-class")).html(col.attr("render-with")).appendTo(tr),$("<td>").addClass(col.attr("column-class")).html(col.attr("render-with")).appendTo(mTr)):($("<td>").addClass(col.attr("column-class")).html("{{"+col.attr("model")+"}}").appendTo(tr),$("<td>").addClass(col.attr("column-class")).html("{{"+col.attr("model")+"}}").appendTo(mTr))}scope.create=function(){rs.$broadcast(scope.createEvent+"_fp_"+scope.task.id)},scope.edit=function(param,index){scope.editUrl?f2.addTask(scope.editUrl+param,scope.task,!0):scope.editEvent&&rs.$broadcast(scope.editEvent+"_fp_"+scope.task.id,param,index)},scope.look=function(){scope.sourceUrl&&f.get(scope.sourceUrl,scope.task).success(function(data){scope.sourceList=data}),fm.show(scope.id+"_add_tbl_mdl"),$(modalContent).addClass("pulse"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("pulse")})},scope.remove=function(index){scope.targetList.splice(index,1)},scope.addToList=function(item){if(void 0!==scope.targetList){for(var exists=!1,i=0;i<scope.targetList.length;i++){var it=scope.targetList[i];if(item.id===it.id){exists=!0;break}}exists?($(modalContent).addClass("shake"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("shake")})):(scope.targetList.push(item),scope.close())}else $(modalContent).addClass("shake"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){
$(modalContent).removeClass("shake")})},scope.close=function(){fm.hide(scope.id+"_add_tbl_mdl",scope.id)},$(element.find("div[ng-transclude]")).remove(),c(table)(scope),c(modal)(scope)}}}]).directive("flowSubColumn",[function(){return{restrict:"AE",scope:{title:"@",model:"=",columnClass:"@",renderWith:"@"}}}]).directive("flowLookUp",["$compile","flowModalService","flowHttpService","flowFrameService","$timeout","$templateCache",function(c,fm,f,f2,t,tc){return{restrict:"AE",scope:{task:"=",model:"=",sourceUrl:"@",label:"@",fieldLabel:"@",disabled:"=",required:"=",id:"@",keyVar:"@",fieldValue:"@",parentId:"@",name:"@"},link:function(scope,element){if(!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.id){var currentElement=$(element).get(),index=$(currentElement).index();scope.id="lookUp_modal_"+index+"_"+scope.task.id}t(function(){scope.sourceList=[];var parent=$(element[0]).parent().get();if(scope.parentId)for(;$(parent).attr("id")!==scope.parentId&&(parent=$(parent).parent().get(),void 0!==parent););var modal=$("<div>").attr("id","{{id}}_add_tbl_mdl").addClass("modal fade fluid-modal").appendTo(parent).get(),modalContent=$("<div>").addClass("modal-dialog modal-lg").attr("id","{{id}}_mdl_cnt").appendTo(modal).get(),modalPanel=$("<div>").addClass("panel panel-primary").appendTo(modalContent).get(),modalPanelHeading=$("<div>").addClass("panel-heading").appendTo(modalPanel).get(),inputGroup=($("<span>").addClass("text-inverse").addClass("col-lg-5 col-md-5 col-sm-3 col-xs-3").html("Select "+scope.label).appendTo(modalPanelHeading).get(),$("<div>").addClass("col-lg-7 col-md-7 col-sm-9 col-xs-9").addClass("input-group").appendTo(modalPanelHeading).get()),inputSpan=($("<input>").addClass("form-control").attr("type","text").attr("ng-model","search").appendTo(inputGroup).get(),$("<span>").addClass("input-group-addon").appendTo(inputGroup).get());$("<i>").addClass("fa fa-search").appendTo(inputSpan);var modalPanelBody=$("<div>").addClass("panel-body").attr("style","overflow:auto;height:200px").appendTo(modalPanel).get(),modalPanelFooter=$("<div>").addClass("panel-footer").attr("style","height:50px").appendTo(modalPanel).get(),pullRightFooterDiv=$("<div>").addClass("pull-right").appendTo(modalPanelFooter).get(),buttonGroup=$("<div>").addClass("btn-group btn-group-sm").appendTo(pullRightFooterDiv).get(),columns=($("<button>").addClass("btn btn-info").attr("ng-click","close()").attr("type","button").html("close").appendTo(buttonGroup).get(),element.find("flow-sub-column")),modalTable=$("<table>").addClass("table table-responsive table-hover").appendTo(modalPanelBody).get(),mThead=$("<thead>").appendTo(modalTable).get(),mTheadRow=$("<tr>").appendTo(mThead).get(),mTbody=$("<tbody>").appendTo(modalTable).get(),mTr=null;mTr=scope.fieldValue?scope.fieldLabel?$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+"."+scope.fieldValue+","+scope.keyVar+"."+scope.fieldLabel+")").appendTo(mTbody).get():$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+"."+scope.fieldValue+")").appendTo(mTbody).get():scope.fieldLabel?$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+","+scope.keyVar+"."+scope.fieldLabel+")").appendTo(mTbody).get():$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+")").appendTo(mTbody).get();for(var i=0;i<columns.length;i++){var col=$(columns[i]);$("<th>").addClass(col.attr("column-class")).html(col.attr("title")).appendTo(mTheadRow),void 0!==col.attr("render-with")?$("<td>").addClass(col.attr("column-class")).html(col.attr("render-with")).appendTo(mTr):$("<td>").addClass(col.attr("column-class")).html("{{"+col.attr("model")+"}}").appendTo(mTr)}var ctnr=void 0;ctnr=scope.fieldLabel?element.find("input").attr("ng-model","model."+scope.fieldLabel):element.find("input").attr("ng-model","model"),$(element.find("div[ng-transclude]")).remove(),c(ctnr)(scope),c(modal)(scope),scope.look=function(){scope.sourceUrl&&f.get(scope.sourceUrl,scope.task).success(function(data){scope.sourceList=data}),fm.show(scope.id+"_add_tbl_mdl"),$(modalContent).addClass("pulse"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("pulse")})}}),scope.close=function(){fm.hide(scope.id+"_add_tbl_mdl",scope.id)},scope.select=function(item,label){scope.model=item,scope.modelLabel=label,scope.close()},scope.reset=function(event){var value=$(event.target).attr("value");$(event.target).attr("value",value)},scope.isModeled=function(){return void 0!==scope.model},scope.isNotModeled=function(){return void 0===scope.model},scope.clear=function(){scope.model=void 0}},template:tc.get("templates/fluid/fluidLookup.html"),replace:!0,transclude:!0}}]).directive("flowSelect",["flowHttpService","$compile","$timeout","$templateCache",function(f,c,t,tc){return{scope:{id:"@",task:"=",model:"=",label:"@",fieldGroup:"@",fieldValue:"@",fieldLabel:"@",sourceUrl:"@",disabled:"=",required:"=",change:"&",name:"@"},link:function(scope,element,attr){scope.templateUrl="templates/fluid/fluidSelect.html",!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),scope.id||(scope.id="fl_slt_"+scope.task.id),(void 0===scope.required||"undefined"===scope.required)&&(scope.required=!1),(void 0===scope.disabled||"undefined"===scope.disabled)&&(scope.disabled=!1),scope.options="",void 0===scope.fieldValue?scope.options="item":scope.options="item."+scope.fieldValue,void 0===scope.fieldLabel||(scope.options+=" as item."+scope.fieldLabel),scope.fieldGroup&&(scope.options+=" group by item."+scope.fieldGroup),scope.options+=" for item in sourceList",scope.$watch(function(scope){return scope.sourceUrl},function(value,old){value&&f.get(scope.sourceUrl,scope.task).success(function(sourceList){scope.sourceList=sourceList,element.html(tc.get(scope.templateUrl)),c(element.contents())(scope)})}),scope.$watch(function(scope){return attr.values},function(value,old){value&&(scope.sourceList=value.split(","),element.html(tc.get(scope.templateUrl)),c(element.contents())(scope))}),scope.$watch(function(scope){return scope.disabled},function(newValue){newValue===!1&&element.removeAttr("disabled")}),scope.$watch(function(scope){return scope.model},function(newValue){scope.change({item:newValue})})},replace:!0}}]).directive("flowPermissionEnabled",["flowHttpService","$compile","sessionService",function(f,c,ss){return{restrict:"A",scope:{task:"=",page:"="},link:function(scope,element,attr){attr.method&&(scope.method=attr.method);var url=f.permissionUrl+"?pageName="+scope.page.name+"&method="+scope.method,enabled=ss.getSessionProperty(url);null!==enabled&&"false"===enabled&&element.attr("disabled",""),null===enabled&&f.get(url,scope.task).success(function(data){data||element.attr("disabled",""),ss.addSessionProperty(url,data)})}}}]).directive("flowPermissionVisible",["flowHttpService","$compile","sessionService",function(f,c,ss){return{restrict:"A",scope:{task:"=",page:"="},link:function(scope,element,attr){attr.method&&(scope.method=attr.method);var url=f.permissionUrl+"?pageName="+scope.page.name+"&method="+scope.method,visible=ss.getSessionProperty(url);null!==visible&&("false"===visible?element.addClass("hidden"):element.removeClass("hidden")),null===visible&&f.get(url,scope.task).success(function(data){data||element.addClass("hidden"),ss.addSessionProperty(url,data)})}}}]).directive("flowTooltip",[function(){return{restrict:"A",link:function(scope,element,attr){scope.tooltipTime=400,attr.tooltipTime&&(scope.tooltipTime=attr.tooltipTime),attr.tooltipHeaderTitle&&(scope.tooltipHeaderTitle=attr.tooltipHeaderTitle),attr.tooltipPosition&&(scope.tooltipPosition=attr.tooltipPosition),attr.tooltipEvent&&(scope.tooltipEvent=attr.tooltipEvent),attr.tooltipTitle&&(scope.tooltipTitle=attr.tooltipTitle),attr.tooltipMy&&(scope.my=attr.tooltipMy),attr.tooltipAt&&(scope.at=attr.tooltipAt),scope.tooltipPosition||(scope.tooltipPosition='{"my":"top center","at":"bottom center"}'),scope.tooltipEvent||(scope.tooltipEvent="hover"),scope.position=JSON.parse(scope.tooltipPosition),scope.my&&(scope.position.my=scope.my),scope.at&&(scope.position.at=scope.at),scope.tooltip=$(element[0]).qtip({content:{title:scope.tooltipHeaderTitle,text:scope.tooltipTitle},position:{at:scope.position.at,my:scope.position.my,adjust:{method:"none shift"}},hide:{event:"click",inactive:scope.tooltipTime},style:"qtip-dark"}),scope.api=scope.tooltip.qtip("api"),scope.$watch(function(){return $(element[0]).attr("tooltip-title")},function(newValue){scope.api.set("content.text",newValue)})}}}]).directive("flowEdit",[function(){return{restrict:"AE",replace:!0,transclude:!0,template:"<div class='form-group'><label class='control-label col-sm-2'>{{label}}<span style='color: #ea520a' ng-show='required'>*</span></label><div class='col-sm-10 marginBottom5px' ng-transclude></div></div>",link:function(scope,element,attr){attr.label&&(scope.label=attr.label),attr.required&&("true"===attr.required.toLowerCase()?scope.required=!0:scope.required=!1)}}}]).directive("flowImage",["$timeout","Upload","sessionService","flowHttpService","$templateCache",function(t,u,ss,fh,tc){return{scope:{model:"=",label:"@",required:"=",url:"@",method:"@",task:"=",sourceUrl:"@",fileChanged:"&",defaultImage:"@",disabled:"="},template:tc.get("templates/fluid/fluidImage.html"),replace:!0,link:function(scope){scope.fileReaderSupported=null!=window.FileReader&&(null==window.FileAPI||0!=FileAPI.html5),scope.preview=[],scope.notDone=!0;var tries=0;scope.defaultImage||(scope.defaultImage="images/gallery/profile_default.png"),scope.refresh=function(){t(function(){scope.model?(scope.sourceUrl&&(scope.preview[0]={},scope.preview[0].dataUrl=fh.host+scope.sourceUrl+scope.model),5==tries?(tries=0,scope.notDone=!1):(tries++,scope.refresh())):(scope.model||(scope.preview[0]={},scope.preview[0].dataUrl=scope.defaultImage),5==tries?(tries=0,scope.notDone=!1):(tries++,scope.refresh()))},1e3)},scope.refresh(),scope.onFileSelect=function($files,$file,$event,$rejectedFiles){var file=$file;null!=file&&scope.fileReaderSupported&&file.type.indexOf("image")>-1&&t(function(){var fileReader=new FileReader;fileReader.readAsDataURL(file),fileReader.onload=function(e){t(function(){file.dataUrl=e.target.result})};var bufferRead=new FileReader;bufferRead.readAsArrayBuffer(file),bufferRead.onload=function(e){t(function(){file.data=e.target.result,u.upload({url:fh.host+scope.url,method:scope.method,headers:{"flow-container-id":"_id_fpb_"+scope.task.id,flowPage:scope.task.currentPage,flowUploadFileId:scope.model},data:{file:file}}).progress(function(evt){file.progress=parseInt(100*evt.loaded/evt.total)}).success(function(data,status,headers,config){scope.model=data.id,scope.fileChanged()}).error(function(data,status,headers,config){})})}})}}}}]).directive("flowLoader",["flowLoaderService",function(fls){return{restrict:"AE",scope:{loaderClass:"@"},transclude:!0,template:"<span><i class='text-inverse' ng-show='!flowLoaderService.loaded' ng-class='loaderClass'></i><span ng-show='flowLoaderService.loaded' ng-transclude></span></span>",replace:!0,link:function(scope,element){scope.flowLoaderService=fls,scope.flowLoaderService.loaded=!0}}}]).directive("fluidLoader",["flowLoaderService",function(fls){return{restrict:"AE",scope:{idleClass:"@"},transclude:!0,template:"<span><i class='text-inverse' ng-show='flowLoaderService.loaded' ng-class='idleClass'></i><span ng-show='!flowLoaderService.loaded' ng-transclude></span></span>",replace:!0,link:function(scope,element){scope.flowLoaderService=fls,scope.flowLoaderService.loaded=!0}}}]).directive("flowDatePicker",["$filter","$templateCache",function(f,tc){return{restrict:"AE",scope:{name:"@",model:"=",label:"@",format:"@",required:"=",disabled:"="},template:tc.get("templates/fluid/fluidDatePicker.html"),replace:!0,link:function(scope,elem,attr){scope.model&&(scope.temp=scope.model),void 0===scope.format&&(scope.format="mm/dd/yyyy");$(elem[0]).find(".datepicker").datepicker({format:scope.format,forceParse:!1,language:"en"});!scope.name&&scope.label&&(scope.name=scope.label.trim()),scope.convertToTimestamp=function(){var date=$(elem[0]).find(".datepicker").datepicker("getDate"),convertedDate=new Date(date).getTime();scope.model=convertedDate}}}}]).directive("flowRadio",["$compile","$templateCache",function(c,tc){return{scope:{name:"@",model:"=",label:"@",required:"=",disabled:"=",direction:"@",group:"@",options:"="},restrict:"AE",replace:!0,template:tc.get("templates/fluid/fluidRadio.html"),link:function(scope,element){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.group&&(scope.group="optRadio"),void 0===scope.direction&&(scope.direction="horizontal");for(var parentDiv=(element[0],$(element[0]).find(".fluid-radio").get()),div=void 0,i=0;i<scope.options.length;i++){var option=scope.options[i];div?"vertical"===scope.direction&&(div=$("<div>").addClass("radio").appendTo(parentDiv)):(div=$("<div>").addClass("radio").appendTo(parentDiv),"horizontal"===scope.direction&&$(div).addClass("fluid-radio-horizontal")),scope.disabled&&(option.disabled=scope.disabled),scope.required&&(option.required=scope.required);var label=$("<label>").html(option.label).appendTo(div).get(),radio=$("<input>").attr("name",scope.group).attr("type","radio").attr("ng-click","select('"+option.value+"')").prependTo(label).get();option.disabled&&$(radio).attr("ng-disabled",option.disabled),option.required&&$(radio).attr("ng-required",option.required),scope.model&&option.value===scope.model&&$(radio).prop("checked",!0)}scope.select=function(value){scope.model=value},c(element.contents())(scope)}}}]).directive("flowUploader",["$upload","$templateCache",function(u,tc){return{restict:"AE",link:function(scope,element,attr){},template:tc.get("templates/fluid/fluidUploader.html")}}]).directive("column",function(){return{restrict:"A",link:function(scope,element,attr){attr.column&&(scope.column=attr.column),scope.column&&element.addClass("col-lg-"+scope.column).addClass("col-md-12").addClass("col-sm-12").addClass("col-xs-12")}}}).directive("fluidInclude",["$http","$compile","$timeout","$rootScope","$templateCache","$ocLazyLoad",function(h,c,t,r,tc,oc){return{restrict:"AE",link:function($scope,elem,attrs){function getPage(){h({method:"GET",url:attrs.url,cache:!0,headers:{"Content-Type":"text/html"}}).then(function(result){tc.put(attrs.url,result.data),elem.append(c(angular.element(result.data))($scope)),t(function(){r.$broadcast(EVENT_PAGE_SUCCESS,$scope.name,$scope.taskId)},1,!1)},function(response){$scope.retry<$scope.retryCount?($scope.retry++,t(getPage,5e3,!1)):r.$broadcast(EVENT_PAGE_ERROR,$scope.name,$scope.taskId)})}$scope.retry=0,$scope.retryCount=10,attrs.name&&($scope.name=attrs.name),attrs.retryCount&&(scope.retryCount=attrs.retryCount),attrs.taskid&&($scope.taskId=attrs.taskid),tc.get(attrs.url)?(elem.append(c(angular.element(tc.get(attrs.url)))($scope)),t(function(){r.$broadcast(EVENT_PAGE_SUCCESS,$scope.name,$scope.taskId)},1,!1)):attrs.url&&getPage()}}}]).directive("FluidImageUpload",["$templateCache","Upload",function(tc,u){return{restrict:"AE",template:tc.get("templates/fluid/fluidImageUpload.html"),scope:{model:"=",url:"@",auto:"=",onLoad:"&",token:"@",width:"=",height:"="},link:function(scope,element,attr){scope.height=200,scope.width=200,scope.auto||(scope.auto=!1),scope.$watch(function(scope){return scope.model},function(newModel){newModel&&(newModel instanceof File?scope.data=newModel:scope.token?-1===newModel.indexOf("?")?scope.src=newModel+"?token="+scope.token:scope.src=newModel+"&token="+scope.token:scope.src=newModel)}),scope.change=function($files,$file,$event,$rejectedFiles){var file=$file;null!=file&&(scope.auto?u.upload({url:scope.url,file:file,fields:{size:file.size}}).success(function(uploadedFile){scope.onLoad&&scope.onLoad(),scope.model=uploadedFile.id}):scope.model=file)}},replace:!0}}]),flowComponents.service("flowFrameService",["flowHttpService","$timeout",function(f,t){return this.isSearch=!1,this.searchTask="",this.taskUrl="services/flow_task_service/getTask?name=",void 0===this.taskList&&(this.taskList=[]),this.pushTask=function(task){this.taskList.push(task)},this.addTask=function(url,origin,newTask){var genericTask=this.createGenericTask();genericTask.origin=origin,this.taskList.push(genericTask),genericTask.index=this.taskList.length-1,genericTask.url=url;var index=this.taskList.length-1;this.fullScreen&&this.toggleFluidscreen(),t(function(){$(".frame-content").scrollTo($("div.box[task]:eq("+index+")"),200)},300)},this.toggleSearch=function(){this.isSearch=!this.isSearch,this.isSearch===!1&&(this.searchTask="")},this.toggleFullscreen=function(task){this.fullScreen=!0,this.fullScreenTask=task,t(function(){$(".frame-content").scrollTop(0)})},this.toggleFluidscreen=function(){this.fullScreen=!1,this.fullScreenTask=void 0},this.getFullTask=function(task){var fullScreenTask=void 0;if(task){var fullScreenTask=this.createGenericTask();fullScreenTask.url=this.taskUrl+task.name,fullScreenTask.size=100}return fullScreenTask},this.createGenericTask=function(){var genericTask=Task();genericTask.id="gen_id_";var countGeneric=0;return angular.forEach(this.taskList,function(task){(task.id+"").indexOf("gen_id_")>-1&&countGeneric++}),genericTask.id=genericTask.id+""+countGeneric,genericTask.size=50,genericTask.active=!0,genericTask.glyph="fa fa-tasks",genericTask.title="...",genericTask.generic=!0,genericTask},this.getFrame=function(){return $("div.frame-content.frame-fullscreen")},this.buildTask=function(task){return task.preLoad=function(){},task.load=function(){},task.postLoad=function(){},task.onWindowClosing=function(page){return!0},task.onWindowHiding=function(page){return!0},task.onWindowOpening=function(){return!0},task.onWindowOpened=function(){},task.onWindowPinned=function(page){},task.onWindowActive=function(page){},task},this.showActionBar=function(){this.actionBarClass="animated slideInUp",this.actionBarShowing=!0},this.hideActionBar=function(){this.actionBarClass="animated slideOutDown",this.actionBarShowing=!1},this}]).service("flowHttpService",["$rootScope","$http","flowLoaderService","sessionService",function(rs,h,fl,ss){return this.httpSerialKey=(new Date).getTime(),this.post=function(url,data,task){task.loaded=!1;var promise=null;this.host&&(url=this.host+url);var headers={"flow-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};return task.currentPage&&(headers.method="post",headers.flowPage=task.currentPage),void 0===data?(promise=h({method:"post",url:url,headers:headers}),promise.success(function(config){}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise.then(function(){task.loaded=!0}),promise):(promise=h({method:"post",url:url,data:data,headers:headers}),promise.success(function(config){this.httpSerialKey=(new Date).getTime()}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED"):403===status&&rs.$broadcast("NOT_ALLOWED"),task.loaded=!0}),promise.then(function(){task.loaded=!0}),promise)},this.postGlobal=function(url,data){var promise=null;return this.host&&(url=this.host+url),promise=h(void 0===data?{method:"post",url:url}:{method:"post",url:url,data:data})},this.put=function(url,data,task){task.loaded=!1;var promise=null;this.host&&(url=this.host+url);var headers={"flow-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};return task.currentPage&&(headers.method="put",headers.flowPage=task.currentPage),void 0===data?(promise=h({method:"put",url:url,headers:headers}),promise.success(function(config){$("#_id_fpb_"+task.id).loadingOverlay("remove")}),promise.error(function(data,status,headers,config){$("#_id_fpb_"+task.id).loadingOverlay("remove"),401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise):(promise=h({method:"put",url:url,data:data,headers:headers}),promise.success(function(config){this.httpSerialKey=(new Date).getTime()}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED"):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg),task.loaded=!0}),promise.then(function(){task.loaded=!0}),promise)},this.putGlobal=function(url,data){var promise=null;this.host&&(url=this.host+url);var headers={"Content-type":"application/json"};return void 0===data?(promise=h({method:"put",url:url,headers:headers}),promise.error(function(data,status,headers,config){401===status&&rs.$broadcast("NOT_AUTHENTICATED",data.msg)}),promise):(promise=h({method:"put",url:url,data:data,headers:headers}),promise.error(function(data,status,headers,config){401===status&&rs.$broadcast("NOT_AUTHENTICATED"),task.loaded=!0}),promise)},this.getLocal=function(url){this.host&&(url=this.host+url);var promise=h({method:"get",url:url});return promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast("NOT_ALLOWED",data.msg)}),promise},this.getGlobal=function(url,progress,cache){fl.enabled=progress,this.host&&(url=this.host+url);var promise=h({method:"get",url:url});return promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast("NOT_ALLOWED",data.msg)}),promise},this.get=function(url,task){task.loaded=!1,this.host&&(url=this.host+url);var headers={"flow-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};task.currentPage&&(headers.method="get",headers.flowPage=task.currentPage);var key=url+this.httpSerialKey,promise=(ss.getSessionProperty(key),h({method:"get",url:url,headers:headers}));return promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise.then(function(){task.loaded=!0}),promise.success(function(data,status,headers,config,statusText){var response={};response.data=data,response.status=status,response.headers=headers,response.config=config,response.statusText=statusText,ss.addSessionProperty(key,response)}),promise},this["delete"]=function(url,task){task.loaded=!1,this.host&&(url=this.host+url);var headers={"flow-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};task.currentPage&&(headers.method="delete",headers.flowPage=task.currentPage);var promise=null;return promise=h({method:"delete",url:url,headers:headers}),promise.success(function(config){}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg),task.loaded=!0}),promise.then(function(){task.loaded=!0}),promise},this.headers=function(task){return{"flow-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"}},this.query=function(query,task){task&&(task.loaded=!1);var promise=h(query);return promise.error(function(data,status,headers,config){task&&(task.loaded=!0),401===status?rs.$broadcast("NOT_AUTHENTICATED"):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise.then(function(){task&&(task.loaded=!0)}),promise},this}]).service("flowControlService",[function(){return this.controls=[],this}]).service("flowMessageService",["$timeout",function(t){var flowMessageService={};return flowMessageService.duration=1e3,flowMessageService.info=function(id,message,duration){return flowMessageService.id=id,flowMessageService.message=message,flowMessageService.alertType="alert alert-info",flowMessageService.duration=duration,flowMessageService},flowMessageService.warning=function(id,message,duration){return flowMessageService.id=id,flowMessageService.message=message,flowMessageService.alertType="alert alert-warning",flowMessageService.duration=duration,flowMessageService},flowMessageService.danger=function(id,message,duration){return flowMessageService.id=id,flowMessageService.message=message,flowMessageService.alertType="alert alert-danger",flowMessageService.duration=duration,flowMessageService},flowMessageService.success=function(id,message,duration){return flowMessageService.id=id,flowMessageService.message=message,flowMessageService.alertType="alert alert-success",flowMessageService.duration=duration,flowMessageService},flowMessageService.open=function(){var messageId="#"+flowMessageService.id,alerts=$(messageId).find("div[flow-msg]").get(),index=0;alerts&&(index=alerts.length);var alertContainer=$(messageId).get(),alert=$("<div>").attr("flow-msg",index).addClass("animated pulse anim-dur").addClass(flowMessageService.alertType).appendTo(alertContainer).get();$("<button>").attr("type","button").addClass("close icon-cross").attr("data-dismiss","alert").appendTo(alert).get(),$("<span>").html(flowMessageService.message).appendTo(alert),t(function(){$(alert).remove()},flowMessageService.duration)},flowMessageService.close=function(messageId){$(messageId).find("p").html(""),$(messageId).removeClass(flowMessageService.alertType),$(messageId).alert("close")},flowMessageService}]).service("flowModalService",[function(){var flowModalService={};return flowModalService.show=function(id){$("#"+id).modal("show"),$(".frame-content").scrollTo($("#"+id),800)},flowModalService.hide=function(id,sourceId){$("#"+id).modal("hide"),sourceId&&$(".frame-content").scrollTo($("#"+sourceId),800)},flowModalService}]).service("flowLoaderService",[function(){return this.loaded=!0,this.enabled=!0,this}]).service("sessionService",["localStorageService",function(ls){this.isSessionSupported=ls.isSupported,this.type=function(){return this.isSessionSupported?"session storage":"cookie storage"},this.isSessionOpened=function(){return null!==ls.get(AUTHORIZATION)},this.containsKey=function(key){return!!this.getSessionProperty(key)},this.addSessionProperty=function(key,value){this.isSessionSupported?ls.set(key,value):ls.cookie.set(key,value)},this.getSessionProperty=function(key){return this.isSessionSupported?ls.get(key):ls.cookie.get(key)},this.login=function(username,password,remember){var base64=window.btoa(username+":"+password);this.addSessionProperty("remember",remember),this.addSessionProperty(AUTHORIZATION,"Basic "+base64)},this.createSession=function(base64){this.addSessionProperty(AUTHORIZATION,"Basic "+base64)},this.removeSessionProperty=function(key){return this.isSessionSupported?ls.remove(key):ls.cookie.remove(key)},this.logout=function(){this.isSessionSupported?ls.clearAll():ls.cookie.clearAll()}}]),flowComponents.factory("flowInjector",["$q","$rootScope","sessionService","flowLoaderService","responseEvent",function(q,rs,ss,fls,r){return{request:function(config){return fls.enabled&&(fls.loaded=!1),config},requestError:function(rejection){return fls.loaded=!0,fls.enabled=!0,q.reject(rejection)},response:function(response){return fls.loaded=!0,fls.enabled=!0,r.callEvent(response),response},responseError:function(rejection){return fls.loaded=!0,fls.enabled=!0,q.reject(rejection)}}}]).factory("responseEvent",["$location","$rootScope",function(l,rs){var responseEvent={};return responseEvent.responses=[],responseEvent.addResponse=function(evt,statusCode,redirect,path){responseEvent.responses.push({evt:evt,statusCode:statusCode,redirect:redirect,path:path})},responseEvent.callEvent=function(res){angular.forEach(responseEvent.responses,function(response){response.statusCode===res.statusCode&&(response.evt?rs.$broadcast(response.evt,response.data,response.statusText):response.redirect&&l.path(response.path))})},responseEvent}]);var eventInterceptorId="event_interceptor_id_",goToEventID="event_got_id_",EVENT_NOT_ALLOWED="not_allowed_",AUTHORIZATION="authorization",monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],VIEWER_PATH="ViewerJS/#../",REG_NUM=/^[0-9]+$/,UI_MESSAGE_NO_CHANGE="No change has been made.";angular.module("home",["flowServices","fluid","flowFactories","war.session"]).controller("homeCtrl",function($scope,sessionService,$http,flowMessageService,flowFrameService,flowHttpService,$timeout,userProfile,UserFactory,userSessionService){$scope.userSessionService=userSessionService,$scope.userProfile=userProfile,$scope.flowFrameService=flowFrameService,$scope.taskbar={},$scope.taskbar.getExcessCount=function(limit){return $scope.flowFrameService.taskList.length-limit},$scope.taskbar.open=function(task){flowFrameService.fullScreen?flowFrameService.fullScreenTask=task:task.active===!0?$(".frame-content").scrollTo($("#_id_fp_"+task.id),800):(task.active=!0,-1===task.id.indexOf("gen")&&($scope.userTask={},$scope.userTask.flowTaskId=task.id.split("_")[0],$scope.userTask.active=task.active,$scope.userTask.flowId=task.flowId,flowHttpService.post("services/flow_user_task_crud/save_task_state?field=active",$scope.userTask,task)))},$scope.taskbar.close=function(task,index){var userTask={};userTask.closed=!0,userTask.flowTaskId=task.id.split("_")[0],userTask.flowId=task.flowId,flowHttpService.post("services/flow_user_task_crud/save_task_state?field=close",userTask,task),flowFrameService.taskList.splice(index,1)},$scope.taskbar.hide=function(task){task.active=!1;var userTask={};userTask.active=!1,userTask.flowTaskId=task.id.split("_")[0],userTask.flowId=task.flowId,flowHttpService.post("services/flow_user_task_crud/save_task_state?field=close",userTask,task)},$scope.logout=function(){flowHttpService.postGlobal("services/logout_service/logoff").success(function(){UserFactory.logout()})},$scope.$on("NOT_AUTHENTICATED",function(event,msg){window.location="signin.html",flowMessageService.danger("mainMessage",msg,2e3)}),$scope.editProfile=function(){flowFrameService.addTask($scope.userProfile.editTaskUrl)}}).controller("signinCtrl",function($scope,$http,sessionService,flowMessageService,userSessionService,HOST,REX_VERSION,UserFactory){$scope.ver=REX_VERSION,$scope.login=function(user){UserFactory.login(user).success(function(data){window.location="home.html"}).error(function(data){flowMessageService.danger("loginMessage",data,3e3).open()})}}).controller("indexCtrl",function(sessionService,UserFactory){UserFactory.isAuthenticated()?window.location="home.html":window.location="signin.html"}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){function refresh(){if(!$.contains(document.documentElement,this))return $(this).timeago("dispose"),this;var data=prepareData(this),$s=$t.settings;return isNaN(data.datetime)||(0==$s.cutoff||Math.abs(distance(data.datetime))<$s.cutoff)&&$(this).text(inWords(data.datetime)),this}function prepareData(element){if(element=$(element),!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());$t.settings.localeTitle?element.attr("title",element.data("timeago").datetime.toLocaleString()):!(text.length>0)||$t.isTime(element)&&element.attr("title")||element.attr("title",text)}return element.data("timeago")}function inWords(date){return $t.inWords(distance(date))}function distance(date){return(new Date).getTime()-date.getTime()}$.timeago=function(timestamp){return inWords(timestamp instanceof Date?timestamp:"string"==typeof timestamp?$.timeago.parse(timestamp):"number"==typeof timestamp?new Date(timestamp):$.timeago.datetime(timestamp))};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",
minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction,value=$l.numbers&&$l.numbers[number]||number;return string.replace(/%d/i,value)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var $l=this.settings.strings,prefix=$l.prefixAgo,suffix=$l.suffixAgo;if(this.settings.allowFuture&&0>distanceMillis&&(prefix=$l.prefixFromNow,suffix=$l.suffixFromNow),!this.settings.allowPast&&distanceMillis>=0)return this.settings.strings.inPast;var seconds=Math.abs(distanceMillis)/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24,years=days/365,words=45>seconds&&substitute($l.seconds,Math.round(seconds))||90>seconds&&substitute($l.minute,1)||45>minutes&&substitute($l.minutes,Math.round(minutes))||90>minutes&&substitute($l.hour,1)||24>hours&&substitute($l.hours,Math.round(hours))||42>hours&&substitute($l.day,1)||30>days&&substitute($l.days,Math.round(days))||45>days&&substitute($l.month,1)||365>days&&substitute($l.months,Math.round(days/30))||1.5>years&&substitute($l.year,1)||substitute($l.years,Math.round(years)),separator=$l.wordSeparator||"";return void 0===$l.wordSeparator&&(separator=" "),$.trim([prefix,words,suffix].join(separator))},parse:function(iso8601){var s=$.trim(iso8601);return s=s.replace(/\.\d+/,""),s=s.replace(/-/,"/").replace(/-/,"/"),s=s.replace(/T/," ").replace(/Z/," UTC"),s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),s=s.replace(/([\+\-]\d\d)$/," $100"),new Date(s)},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601)},isTime:function(elem){return"time"===$(elem).get(0).tagName.toLowerCase()}});var functions={init:function(){var refresh_el=$.proxy(refresh,this);refresh_el();var $s=$t.settings;$s.refreshMillis>0&&(this._timeagoInterval=setInterval(refresh_el,$s.refreshMillis))},update:function(time){var parsedTime=$t.parse(time);$(this).data("timeago",{datetime:parsedTime}),$t.settings.localeTitle&&$(this).attr("title",parsedTime.toLocaleString()),refresh.apply(this)},updateFromDOM:function(){$(this).data("timeago",{datetime:$t.parse($t.isTime(this)?$(this).attr("datetime"):$(this).attr("title"))}),refresh.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};$.fn.timeago=function(action,options){var fn=action?functions[action]:functions.init;if(!fn)throw new Error("Unknown function name '"+action+"' for timeago");return this.each(function(){fn.call(this,options)}),this},document.createElement("abbr"),document.createElement("time")});var App=angular.module("MAdmin",["ui.bootstrap","fluid","flowServices"]);App.controller("AppController",function($scope,$rootScope,$location,userAppSetting,sessionService,userProfile,userSessionService,UserFactory,FlowUserDetail,WarAgent,TaskResource,GroupResource,flowFrameService){$scope.userSessionService=userSessionService,$scope.data={},$scope.effect="",$scope.header={form:!1,chat:!1,theme:!1,footer:!0,history:!1,animation:"",boxed:"",layout_menu:"",theme_style:userAppSetting.style,header_topbar:"header-fixed",menu_style:userAppSetting.menu,menu_collapse:userAppSetting.hideMenu?"sidebar-collapsed":"",layout_horizontal_menu:"",toggle:function(k){switch(k){case"chat":$scope.header.chat=!$scope.header.chat;break;case"form":$scope.header.form=!$scope.header.form;break;case"sitebar":$scope.header.menu_style=$scope.header.menu_style?"":""===$scope.header.layout_menu?"sidebar-collapsed":"right-side-collapsed";break;case"theme":$scope.header.theme=!$scope.header.theme;break;case"history":$scope.header.history=!$scope.header.history}},collapse:function(c){"change"===c?($scope.header.menu_collapse="",userAppSetting.menu=$scope.header.menu_style,userAppSetting.updateSetting("menu")):"k"===c?($scope.header.menu_collapse=$scope.header.menu_collapse?"":"sidebar-collapsed",$scope.header.menu_style=userAppSetting.menu,userAppSetting.hideMenu="sidebar-collapsed"===$scope.header.menu_collapse,userAppSetting.updateSetting("hideMenu")):$scope.header.menu_style?($scope.header.menu_style="",$scope.header.menu_collapse=$scope.header.menu_collapse?"":"sidebar-collapsed"):($scope.header.menu_collapse=$scope.header.menu_collapse?"":"sidebar-collapsed",$scope.header.menu_style=userAppSetting.menu)}},$rootScope.userProfile=userProfile,$scope.$watch(function(scope){return sessionService.isSessionOpened()},function(session){session&&userAppSetting.createAppSetting().success(function(data){data.menu&&(userAppSetting.menu=data.menu),data.theme&&(userAppSetting.theme=data.theme),data.bgColor&&(userAppSetting.bgColor=data.bgColor),data.hideMenu&&(userAppSetting.hideMenu=data.hideMenu),$rootScope.theme=userAppSetting.theme,$scope.header.menu_style=userAppSetting.menu,$scope.header.menu_collapse=userAppSetting.hideMenu?"sidebar-collapsed":""})}),$scope.style_change=function(){$rootScope.style=$scope.header.theme_style,userAppSetting.style=$scope.header.theme_style,userAppSetting.updateSetting("style")},$scope.theme_change=function(t){$rootScope.theme=t,userAppSetting.theme=t,userAppSetting.updateSetting("theme")},$(window).scroll(function(){$(this).scrollTop()>0?$(".quick-sidebar").css("top","0"):$(".quick-sidebar").css("top","50px")}),$(".quick-sidebar > .header-quick-sidebar").slimScroll({height:$(window).height()-50,width:"280px",wheelStep:30}),$("#news-ticker-close").click(function(e){$(".news-ticker").remove()}),$scope.$watch(function(){return UserFactory.isAuthenticated()},function(session){session?(FlowUserDetail.currentDetail(UserFactory.getUser().flowUserDetailId,function(userDetail){userProfile.createUserProfile(userDetail),userSessionService.profileLoaded=!0},function(){userSessionService.profileLoaded=!1}),WarAgent.current(function(agent){userProfile.agent=agent,userSessionService.agentLoaded=!0},function(){userSessionService.agentLoaded=!1}),TaskResource.getSessionTasks(function(tasks){0===tasks.length&&(userSessionService.userTasksLoaded=!0),angular.forEach(tasks,function(task,$index){flowFrameService.addTask(task),tasks.length-1===$index&&(userSessionService.userTasksLoaded=!0)})},function(){userSessionService.userTasksLoaded=!1}),GroupResource.getByName(UserFactory.getUser().group,function(group){userProfile.group=group,userProfile.group.emblemPath=GroupResource.getAvatarPath(userProfile.group.emblemId),userSessionService.groupLoaded=!0},function(){userSessionService.groupLoaded=!1})):window.location="signin.html"})}),function($,window,undefined){"use strict";function Plugin(el,options){var base=this;base.$el=$(el),base.el=el,base.$el.bind("destroyed",$.proxy(base.teardown,base)),base.$window=$(window),base.$clonedHeader=null,base.$originalHeader=null,base.isSticky=!1,base.leftOffset=null,base.topOffset=null,base.init=function(){base.options=$.extend({},defaults,options),base.$el.each(function(){var $this=$(this);$this.css("padding",0),base.$originalHeader=$("thead:first",this),base.$clonedHeader=base.$originalHeader.clone(),base.$clonedHeader.addClass("tableFloatingHeader"),base.$clonedHeader.css("display","none"),base.$originalHeader.addClass("tableFloatingHeaderOriginal"),base.$originalHeader.after(base.$clonedHeader),base.$printStyle=$('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),$("head").append(base.$printStyle)}),base.updateWidth(),base.toggleHeaders(),base.bind()},base.destroy=function(){base.$el.unbind("destroyed",base.teardown),base.teardown()},base.teardown=function(){base.isSticky&&base.$originalHeader.css("position","static"),$.removeData(base.el,"plugin_"+name),base.unbind(),base.$clonedHeader.remove(),base.$originalHeader.removeClass("tableFloatingHeaderOriginal"),base.$originalHeader.css("visibility","visible"),base.$printStyle.remove(),base.el=null,base.$el=null},base.bind=function(){base.$window.on("scroll."+name,base.toggleHeaders),base.$window.on("resize."+name,base.toggleHeaders),base.$window.on("resize."+name,base.updateWidth)},base.unbind=function(){base.$window.off("."+name,base.toggleHeaders),base.$window.off("."+name,base.updateWidth),base.$el.off("."+name),base.$el.find("*").off("."+name)},base.toggleHeaders=function(){base.$el.each(function(){var $this=$(this),newTopOffset=isNaN(base.options.fixedOffset)?base.options.fixedOffset.height():base.options.fixedOffset,offset=$this.offset(),scrollTop=base.$window.scrollTop()+newTopOffset,scrollLeft=base.$window.scrollLeft();if(scrollTop>offset.top&&scrollTop<offset.top+$this.height()-base.$clonedHeader.height()){var newLeft=offset.left-scrollLeft;if(base.isSticky&&newLeft===base.leftOffset&&newTopOffset===base.topOffset)return;base.$originalHeader.css({position:"fixed",top:newTopOffset,"margin-top":0,left:newLeft,"z-index":1}),base.$clonedHeader.css("display",""),base.isSticky=!0,base.leftOffset=newLeft,base.topOffset=newTopOffset,base.updateWidth()}else base.isSticky&&(base.$originalHeader.css("position","static"),base.$clonedHeader.css("display","none"),base.isSticky=!1)})},base.updateWidth=function(){if(base.isSticky){var $origHeaders=$("th,td",base.$originalHeader);$("th,td",base.$clonedHeader).each(function(index){var width,$this=$(this);width="border-box"===$this.css("box-sizing")?$this.outerWidth():$this.width(),$origHeaders.eq(index).css({"min-width":width,"max-width":width})}),base.$originalHeader.css("width",base.$clonedHeader.width())}},base.updateOptions=function(options){base.options=$.extend({},defaults,options),base.updateWidth(),base.toggleHeaders()},base.init()}var name="stickyTableHeaders",defaults={fixedOffset:0};$.fn[name]=function(options){return this.each(function(){var instance=$.data(this,"plugin_"+name);instance?"string"==typeof options?instance[options].apply(instance):instance.updateOptions(options):"destroy"!==options&&$.data(this,"plugin_"+name,new Plugin(this,options))})}}(jQuery,window),angular.module("flowServices",["fluid"]).service("userSessionService",[function(){return this.isReady=function(){return this.profileLoaded&&this.agentLoaded&&this.userTasksLoaded&&this.groupLoaded},this.isNotConnected=function(){return this.profileLoaded===!1||this.agentLoaded===!1||this.userTasksLoaded===!1||this.groupLoaded===!1},this.reload=function(){window.location="home.html"},this}]).service("userProfile",["flowHttpService",function(f){return this.createUserProfile=function(userDetail){this.fullName=userDetail.fullName,this.detailId=userDetail.id,this.avatar=withHost("services/download_service/getContent/"+userDetail.avatar),this.groupOwner=userDetail.groupOwner,this.profiles=userDetail.profiles,this.editTaskUrl="services/flow_task_service/getTask?name=edit_profile&active=true&size=50&showToolBar=false&page=edit_profile&page-path="+userDetail.id+"&newTask=false"},this.destroyUserProfile=function(){this.fullName=void 0,this.username=void 0,this.email=void 0,this.detailId=void 0,this.avatar=void 0,this.group=void 0,this.groupOwner=void 0,this.profiles=void 0,this.agent=void 0},this.updateProfile=function(userDetail){this.fullName=userDetail.fullName,this.avatar=withHost("services/download_service/getContent/"+userDetail.avatar)},this}]).service("userAppSetting",["flowHttpService",function(f){return this.menu="sidebar-default",this.style="style1",this.theme="yellow-blue",this.bgColor="#FF6A6A",this.url="session/flow_user_app_setting_session",this.hideMenu=!1,this.layout="FLUIDSCREEN",this.createAppSetting=function(){return f.getGlobal(this.url+"/setting")},this.updateSetting=function(query){var appSetting={},value=void 0;"menu"===query?value=this.menu:"theme"===query?value=this.theme:"style"===query?value=this.style:"hideMenu"===query?value=this.hideMenu:"layout"===query&&(value=this.layout);var url=this.url+"/update?"+query+"="+value;f.putGlobal(url,appSetting).success(function(data){})},this}]).service("hasProfile",["flowHttpService",function(f){return this.check=function(profiles,task){return f.post(this.url,profiles,task)},this}]).service("imageService",["flowHttpService",function(f){return this.url="services/download_service/getContent/",this.getAvatar=function(id){return id?f.host+this.url+id:"../images/gallery/profile_default.png"},this}]),angular.module("sessionControllers",["fluid","ngResource","flowServices","truncate","flowAppDirectives","ngCookies"]).controller("editProfileCtrl",["$scope","userProfile","UserFactory",function(s,u,uf){s.task.page.load=function(data){this.title=u.fullName,s.task.password={},s.task.flowUserDetail=data,s.task.tempData={},s.task.updatePassword=!1,angular.copy(data,s.task.tempData)},s.task.validatePassword=function(){s.task.password.current&&s.http.post("session/password_service/validate/",s.task.password.current,uf.getUser().username).success(function(valid){s.task.showChangePasswordField=valid,s.task.showInvalidPassword=!valid}).error(function(){s.task.showInvalidPassword=!0})},s.task.changePassword=function(){s.task.updatePassword=!s.task.updatePassword,s.task.showChangePasswordField=!1,s.task.password={}},s.task.update=function(){s.task.updatePassword&&s.task.password["new"]&&s.http.post("session/password_service/change_password/",s.task.password["new"],uf.getUser().username).success(function(data){s.flow.message.success("Password has been changed."),s.task.changePassword()}).error(function(msg){}),angular.equals(s.task.flowUserDetail,s.task.tempData)?s.task.updatePassword||s.flow.message.info(UI_MESSAGE_NO_CHANGE):s.flow.action("put",s.task.flowUserDetail,s.task.flowUserDetail.id)},s.$on(s.flow.event.getSuccessEventId(),function(event,data,method){"put"===method&&(u.updateProfile(s.task.flowUserDetail),s.task.tempData={})})}]).controller("notificationCtrl",["$scope","userProfile","fnService","$rootScope",function(s,u,fs,rs){s.fs=fs,s.back=function(){rs.$broadcast(s.flow.getEventId("back"))},s.open=function(alert){s.flow.goTo("notification_view",alert.id)},s.getMessageTypeGlyph=function(alert){return"danger"===alert.messageType?"fa fa-exclamation":"info"===alert.messageType?"fa fa-info":"warning"===alert.messageType?"fa fa-warning":"success"===alert.messageType?"fa fa-check":void 0},s.getLabelScheme=function(alert){return"danger"===alert.messageType?"label label-danger":"info"===alert.messageType?"label label-info":"warning"===alert.messageType?"label label-warning":"success"===alert.messageType?"label label-success":void 0},s.getPanelScheme=function(alert){return"danger"===alert.messageType?"panel panel-danger":"info"===alert.messageType?"panel panel-info":"warning"===alert.messageType?"panel panel-warning":"success"===alert.messageType?"panel panel-success":void 0},s.getTypeIcon=function(alert){return"silent"===alert.alarmType?"fa fa-bell-slash-o":"system"===alert.alarmType?"fa fa-gears":"message"===alert.alarmType?"fa fa-envelope-o":"notice"===alert.alarmType?"fa fa-info-circle":"broadcast"===alert.alarmType?"fa fa-globe":void 0},s.flow.pageCallBack=function(page,data){"notification_view"===page?s.data=data:"notification_center"===page&&(s.data=data)}}]),angular.module("war.session",["fluid"]).config(["$httpProvider",function(hp){hp.interceptors.push("AuthInterceptor")}]).factory("UserFactory",["$http","AuthFactory",function(h,a){function login(login){var encodedKey=btoa("loginKey:"+login.username+":"+login.password);return h.post(withHost("session/v2/login"),encodedKey).success(function(data){data&&(a.setToken(data.token),a.setInfo(data.info))})}function logout(){a.removeToken().removeInfo()}function getUser(){return a.getInfo()}function isAuthenticated(){return null!=a.getToken()}var userFactory={login:login,logout:logout,getUser:getUser,isAuthenticated:isAuthenticated};return userFactory}]).factory("AuthFactory",["sessionService",function(ss){function removeToken(){return ss.removeSessionProperty("token"),this}function removeInfo(){return ss.removeSessionProperty("info"),this}function withTokenUrl(url){var ret=void 0;return ret=-1===url.indexOf("?")?url+"?token="+this.getToken():url+"&token="+this.getToken()}function setToken(token){ss.addSessionProperty("token",token)}function getToken(){return ss.getSessionProperty("token")}function setInfo(info){ss.addSessionProperty("info",info)}function getInfo(){return ss.getSessionProperty("info")}var authFactory={setToken:setToken,getToken:getToken,setInfo:setInfo,getInfo:getInfo,withTokenUrl:withTokenUrl,removeToken:removeToken,removeInfo:removeInfo};return authFactory}]).factory("AuthInterceptor",["AuthFactory",function(a){return{request:function(config){return a.getToken()&&(config.headers=config.headers||{},config.headers.Authorization="bearer "+a.getToken()),config}}}]),angular.module("war.sidebar",[]).controller("sidebarCtl",["$scope","UserFactory","userProfile","userAppSetting",function(scope,UserFactory,up,uas){scope.userProfile=up,scope.userFactory=UserFactory,scope.appSetting=uas}]),angular.module("rexTemplates",["templates/app/header.html","templates/app/sidebar.html","templates/app/signin.html","templates/fluid/fluidBar.html","templates/fluid/fluidCheckbox.html","templates/fluid/fluidDatePicker.html","templates/fluid/fluidField.html","templates/fluid/fluidFrame.html","templates/fluid/fluidImage.html","templates/fluid/fluidImageUpload.html","templates/fluid/fluidLookup.html","templates/fluid/fluidModal.html","templates/fluid/fluidNotify.html","templates/fluid/fluidPanel.html","templates/fluid/fluidRadio.html","templates/fluid/fluidReportTable.html","templates/fluid/fluidSelect.html","templates/fluid/fluidTextArea.html","templates/fluid/fluidToolbar.html","templates/fluid/fluidUploader.html"]),angular.module("templates/app/header.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/app/header.html",'<nav id="topbar" ng-controller="homeCtrl" role="navigation" style="margin-bottom: 0" data-step="1" class="navbar navbar-default navbar-static-top"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".sidebar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button> <a id="logo" href="#" class="navbar-brand"><span class="fa fa-rocket"></span><span class="logo-text">{{userProfile.group.groupTitle}}</span><img style="display: none" ng-src="{{userProfile.group.emblemPath}}" fallback-src="images/icons/logo.png" height="46" width="48" class="logo-text-icon emblem"></a></div><div class="topbar-main"><a href="#" id="menu-toggle" href="javascript:void(0);" ng-click="header.collapse(\'k\')" class="hidden-xs"><i class="fa fa-bars"></i></a><ul class="nav navabar" ng-show="flowFrameSerivce.taskList.length > 10" class="hidden-xs"><li class="dropdown dropdown-toggle"><a data-hover="dropdown" href="javascript:void(0);"><span ng-show="flowFrameService.taskList.length > 0" class="badge badge-blue">{{taskbar.getExcessCount(flowFrameService.taskList)}}</span>&nbsp;<span class="caret"></span></a><ul class="dropdown-menu dropdown-user" style="height:200px;overflow:auto"><li ng-repeat="task in flowFrameService.taskList" ng-show="$index >= 10"><a href="#"><i class="{{task.glyph}}"></i>&nbsp;<span>{{task.title}}</span></a></li></ul></li></ul><ul class="nav navbar navbar-top-links navbar-right"><li><fluid-loader><img src="images/loader/loader6.GIF"></fluid-loader></li><li><div class="search-tasks"><input class="animted anim-dur fadeIn" ng-show="flowFrameService.isSearch" type="text" placeholder="Search task" name="taskSearchField" ng-model="flowFrameService.searchTask"> <a href="#" ng-click="flowFrameService.toggleSearch()" flow-tooltip class="fa fa-search" tooltip-title="Search tasks"></a></div></li><li class="dropdown topbar-user"><a data-toggle="dropdown" href="javascript:void(0);" class="dropdown-toggle"><img ng-src="{{userProfile.avatar}}" fallback-src="images/gallery/profile_default.png" alt="" class="img-responsive img-circle">&nbsp;<span class="hidden-xs">{{userProfile.fullName}}</span>&nbsp;<span class="caret"></span></a><ul class="dropdown-menu dropdown-user"><li><a href="#" ng-click="editProfile()"><i class="octicon octicon-file-media"></i>My Profile</a></li><li class="divider"></li><li><a href="#" ng-click="logout()"><i class="fa fa-key"></i>Log Out</a></li></ul></li><li fn-bar></li><li class="dropdown hidden-lg hidden-md hidden-sm"><a data-toggle="dropdown" href="javascript:void(0);" class="dropdown-toggle"><i class="fa fa-th"></i> <span ng-show="flowFrameService.taskList.length > 0" class="badge badge-blue">{{flowFrameService.taskList.length}}</span>&nbsp;<span class="caret"></span></a><ul class="dropdown-menu dropdown-tasks translucent"><li><div class="dropdown-slimscroll" style="width:250px;height:300px;overflow:auto"><ul><li class="fluid-task-item-xs {{tsk.active ? \'fluid-task-item-active\':\'fluid-task-item-hidden\'}}" ng-repeat="tsk in flowFrameService.taskList"><a href="#" ng-click="taskbar.open(tsk)"><i class="{{tsk.glyph}}"></i>&nbsp;&nbsp;&nbsp;<span>{{tsk.title}}</span></a></li></ul></div></li></ul></li><li id="dropdown-theme-setting" class="dropdown hidden-xs"><a id="theme-setting" href="javascript:;" ng-click="header.toggle(\'theme\')" class="dropdown-toggle"><i class="fa fa-cogs"></i></a><ul ng-class="{show:header.theme}" class="dropdown-menu dropdown-theme-setting pull-right"><li><h4 class="mtn">Theme Colors</h4><ul id="list-color" class="list-unstyled list-inline"><li data-color="green-dark" ng-click="theme_change(\'green-dark\')" title="Green - Dark" class="green-dark"></li><li data-color="red-dark" ng-click="theme_change(\'red-dark\')" title="Red - Dark" class="red-dark"></li><li data-color="pink-dark" ng-click="theme_change(\'pink-dark\')" title="Pink - Dark" class="pink-dark"></li><li data-color="blue-dark" ng-click="theme_change(\'blue-dark\')" title="Blue - Dark" class="blue-dark"></li><li data-color="yellow-dark" ng-click="theme_change(\'yellow-dark\')" title="Yellow - Dark" class="yellow-dark"></li><li data-color="green-grey" ng-click="theme_change(\'green-grey\')" title="Green - Grey" class="green-grey"></li><li data-color="red-grey" ng-click="theme_change(\'red-grey\')" title="Red - Grey" class="red-grey"></li><li data-color="pink-grey" ng-click="theme_change(\'pink-grey\')" title="Pink - Grey" class="pink-grey"></li><li data-color="blue-grey" ng-click="theme_change(\'blue-grey\')" title="Blue - Grey" class="blue-grey"></li><li data-color="yellow-grey" ng-click="theme_change(\'yellow-grey\')" title="Yellow - Grey" class="yellow-grey"></li><li data-color="yellow-green" ng-click="theme_change(\'yellow-green\')" title="Yellow - Green" class="yellow-green"></li><li data-color="orange-grey" ng-click="theme_change(\'orange-grey\')" title="Orange - Grey" class="orange-grey"></li><li data-color="pink-blue" ng-click="theme_change(\'pink-blue\')" title="Pink - Blue" class="pink-blue"></li><li data-color="pink-violet" ng-click="theme_change(\'pink-violet\')" title="Pink - Violet" class="pink-violet active"></li><li data-color="orange-violet" ng-click="theme_change(\'orange-violet\')" title="Orange - Violet" class="orange-violet"></li><li data-color="pink-green" ng-click="theme_change(\'pink-green\')" title="Pink - Green" class="pink-green"></li><li data-color="pink-brown" ng-click="theme_change(\'pink-brown\')" title="Pink - Brown" class="pink-brown"></li><li data-color="orange-blue" ng-click="theme_change(\'orange-blue\')" title="Orange - Blue" class="orange-blue"></li><li data-color="yellow-blue" ng-click="theme_change(\'yellow-blue\')" title="Yellow - Blue" class="yellow-blue"></li><li data-color="green-blue" ng-click="theme_change(\'green-blue\')" title="Green - Blue" class="green-blue"></li></ul></li></ul></li></ul><a href="#" class="fluidTaskBar hidden-md hidden-sm hidden-xs" ng-class="task.active ? \'fluidTaskBar-icon-shown\' : \'\'" style="height:47px;width:48px; margin: 1px" ng-repeat="task in flowFrameService.taskList | limitTo:10" ng-click="taskbar.open(task)" flow-bar-tooltip index="$index" task="task"><i class="fluid-bar-icon {{task.glyph}}"></i></a><div class="dropdown fluidTaskBarMore hidden-md hidden-sm hidden-xs"><a href="#" data-toggle="dropdown" class="hiddex-xs dropdown-toggle" ng-show="flowFrameService.taskList.length > 10"><i class="fluid-bar-icon-sub-task fa fa-th"></i>&nbsp;<span class="badge badge-blue">{{taskbar.getExcessCount(10)}}</span></a><ul class="dropdown-menu dropdown-tasks translucent"><li><div class="dropdown-slimscroll" style="width:250px;height:300px;overflow:auto"><ul><li class="fluid-task-item {{tsk.active ? \'fluid-task-item-active\':\'fluid-task-item-hidden\'}}" ng-repeat="tsk in flowFrameService.taskList" ng-hide="$index < 10"><div class="btn-group btn-group-sm" style="color:white"><a href="#" class="btn btn-danger btn-xs text-inverse" ng-click="taskbar.close(tsk,$index)"><i class="fa fa-close"></i></a> <a href="#" class="btn btn-info btn-xs" ng-click="taskbar.hide(tsk)"><i class="fa fa-angle-down"></i></a></div><a href="#" ng-click="taskbar.open(tsk)"><i class="{{tsk.glyph}}"></i>&nbsp;&nbsp;&nbsp;<span class="task-item">{{tsk.title}}</span></a></li></ul></div></li></ul></div><a href="#" class="fluidTaskBar hidden-lg hidden-xs" ng-class="task.active ? \'fluidTaskBar-icon-shown\' : \'\'" style="height:47px;width:48px; margin: 1px" ng-repeat="task in flowFrameService.taskList | limitTo:5" ng-click="taskbar.open(task)" flow-tooltip tooltip-title="{{task.title}}"><i class="fluid-bar-icon {{task.glyph}}"></i></a><div class="dropdown fluidTaskBarMore hidden-lg hidden-xs"><a href="#" data-toggle="dropdown" class="hiddex-xs dropdown-toggle" ng-show="flowFrameService.taskList.length > 5"><i class="fluid-bar-icon-sub-task fa fa-th"></i>&nbsp;<span class="badge badge-blue">{{taskbar.getExcessCount(5)}}</span></a><ul class="dropdown-menu dropdown-tasks translucent"><li><div class="dropdown-slimscroll" style="width:250px;height:300px;overflow:auto"><ul><li class="fluid-task-item {{tsk.active ? \'fluid-task-item-active\':\'fluid-task-item-hidden\'}}" ng-repeat="tsk in flowFrameService.taskList" ng-hide="$index < 5"><div class="btn-group btn-group-sm" style="color:white"><a href="#" class="btn btn-danger btn-xs text-inverse" ng-click="taskbar.close(tsk,$index)"><i class="fa fa-close"></i></a> <a href="#" class="btn btn-info btn-xs" ng-click="taskbar.hide(tsk)"><i class="fa fa-angle-down"></i></a></div><a href="#" ng-click="taskbar.open(tsk)"><i class="{{tsk.glyph}}"></i>&nbsp;&nbsp;&nbsp;<span class="task-item">{{tsk.title}}</span></a></li></ul></div></li></ul></div></div></nav>')}]),angular.module("templates/app/sidebar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/app/sidebar.html",'<div ng-controller="sidebarCtl" class="sidebar-collapse"><ul id="side-menu" fluid-menu class="nav admin-nav-main"><li class="user-panel"><div class="thumb"><img fallback-src="images/gallery/profile_default.png" ng-src="{{userProfile.avatar}}" class="img-circle"></div><div class="info"><p>{{userProfile.fullName}}</p></div><div class="clearfix"></div></li></ul></div>')}]),angular.module("templates/app/signin.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/app/signin.html",'<div id="signin-page"><div class="page-form-wrapper"></div><div class="page-form"><form action="/#/" class="form"><div class="header-content"><h1>Log In</h1></div><div class="body-content"><p>Log in with a social network:</p><div class="row mbm text-center"><div class="col-md-4"><a href="javascript:void(0);" class="btn btn-sm btn-twitter btn-block"><i class="fa fa-twitter fa-fw"></i>Twitter</a></div><div class="col-md-4"><a href="javascript:void(0);" class="btn btn-sm btn-facebook btn-block"><i class="fa fa-facebook fa-fw"></i>Facebook</a></div><div class="col-md-4"><a href="javascript:void(0);" class="btn btn-sm btn-google-plus btn-block"><i class="fa fa-google-plus fa-fw"></i>Google +</a></div></div><div class="form-group"><div class="input-icon right"><i class="fa fa-user"></i> <input type="text" placeholder="Username" name="username" class="form-control"></div></div><div class="form-group"><div class="input-icon right"><i class="fa fa-key"></i> <input type="password" placeholder="Password" name="password" class="form-control"></div></div><div class="form-group pull-left"><div class="checkbox-list"><label><input type="checkbox">&nbsp; Keep me signed in</label></div></div><div class="form-group pull-right"><button type="button" onclick="window.location.href=&quot;/#/&quot" class="btn btn-success">Log In &nbsp;<i class="fa fa-chevron-circle-right"></i></button></div><div class="clearfix"></div><div class="forget-password"><h4>Forgotten your Password?</h4><p>no worries, click <a href="javascript:void(0);" class="btn-forgot-pwd">here</a> to reset your password.</p></div><hr><p>Don\'t have an account? <a id="btn-register" href="/#/extra-signup">Register Now</a></p></div></form></div></div>')}]),angular.module("templates/fluid/fluidBar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidBar.html",'<ul class="nav navbar navbar-top-links"><li ng-class="task.active ? \'flow-bar-icon-active\':\'\'" ng-repeat="task in taskList | limitTo:10"><a class="flow-bar-icon" href="#" ng-click="open(task)"><i ng-class="task.glyph"></i><span class="hidden-lg hidden-md hidden-sm">&nbsp;{{task.title}}</span></a></li><li class="hidden-xs" class="dropdown" ng-hide="taskList.length < 11"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-angle-down"></span></a><ul class="dropdown-menu" style="overflow: auto"><li ng-show="$index >= 10" class="border" ng-repeat="tsk in taskList" ng-class="tsk.active ?\'flow-bar-icon-active\':\'\'"><a href="#" class="flow-bar-task" title="{{tsk.title}}" ng-click="open(tsk)"><i ng-class="tsk.glyph"></i> <span>&nbsp;{{tsk.title}}</span></a></li></ul></li></ul>')}]),angular.module("templates/fluid/fluidCheckbox.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidCheckbox.html",'<div class="form-group flow-form"><label ng-click="update()" column="12" class="control-label" for="{{name}}"><input style="position: absolute; left: -9999px; width: 1px; height: 1px" name="{{name}}" ng-model="model" ng-disabled="disabled ? disabled : false" ng-required="required ? required : false"> <span ng-if="disabled ? disabled : false" class="fluid-checkbox disabled"><i ng-if="model" class="fa fa-check-square-o" style="font-size: 20px;color: #d3d3d3"></i> <i ng-if="!model" class="fa fa-square-o" style="font-size: 20px;color: #d3d3d3"></i></span> <span ng-if="disabled ? false : true" class="fluid-checkbox" type="button"><i ng-if="model" class="text-success fa fa-check-square-o" style="font-size: 20px"></i> <i ng-if="!model" class="fa fa-square-o" style="font-size: 20px;color: grey"></i></span> {{label}} <span class="text-danger" ng-show="required">*</span></label></div>')}]),angular.module("templates/fluid/fluidDatePicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidDatePicker.html",'<div class="form-group flow-form"><label column="12" class="control-label">{{label}}<span style="color: #ea520a" ng-show="required">*</span></label><div column="12"><input placeholder="{{format}}" name="{{name}}" ng-change="convertToTimestamp()" ng-disabled="disabled" class="form-control datepicker" ng-model="temp" type="text" ng-required="required"></div></div>')}]),angular.module("templates/fluid/fluidField.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidField.html",'<div class="form-group flow-form"><label for="{{name}}" column="12" class="control-label">{{label}}<span class="text-danger" ng-show="required">*</span> <input ng-blur="blur()" name="{{name}}" ng-disabled="disabled" class="form-control" ng-model="model" type="{{type}}" ng-required="required"></label></div>');
}]),angular.module("templates/fluid/fluidFrame.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidFrame.html",'<div class="container-fluid frame-content" ng-class="flowFrameService.fullScreen ? \'frame-fullscreen\' : \'frame-fluidscreen\'"><div ng-if="flowFrameService.fullScreen" class="container-fluid frame-content-div" ng-show="flowFrameService.fullScreen"><flow-panel task="flowFrameService.fullScreenTask"></flow-panel></div><div ng-if="!flowFrameService.fullScreen" class="container-fluid frame-content-div" ng-hide="flowFrameService.fullScreen"><div ng-init="initTask(task)" ng-repeat="task in flowFrameService.taskList | filter:{active:true, title:flowFrameService.searchTask}"><flow-panel task="task"></flow-panel></div></div><div class="flow-footer portlet box color portlet-primary" ng-show="flowFrameService.actionBarShowing" ng-class="flowFrameService.actionBarClass"><div class="portlet-header"><div class="tools"></div></div><div class="portlet-body">body</div></div></div>')}]),angular.module("templates/fluid/fluidImage.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidImage.html",'<div class="form-group flow-form"><label column="12" class="control-label col-sm-2">{{label}}<i ng-if="notDone" class="fa fa-spinner fa-spin"></i><span class="text-danger" ng-show="required">*</span><div class="flow-group-icon" accept="image/*" ng-model="preview" ng-file-drop drag-over-class="{accept:\'flow-group-icon-accept\', reject:\'flow-group-icon-error\', delay:100}"><img class="thumbnail" style="border-radius: 5px" width="198px" height="173px" ng-src="{{preview[0].dataUrl}}"></div><div class="marginBottom5px" ng-show="!disabled"><span accept="image/*" class="btn btn-info" ng-show="!disabled" ng-file-change="onFileSelect(preview[0],$files)" ng-file-select ng-model="preview"><span class="fa fa-image" ng-show="!disabled"></span>&nbsp;&nbsp;{{preview[0].dataUrl != null ? \'Change\' : \'Attach\'}}</span></div></label></div>')}]),angular.module("templates/fluid/fluidImageUpload.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidImageUpload.html",'<div class="image-upload"><div class="img-group"><img height="{{height-30}}" width="{{width}}" ngf-src="data" fallback-src="images/gallery/profile_default.png" ngf-accept="\'image/*\'"></div><div class="img-group"><span ngf-select ngf-change="change($files, $file, $event, $rejectedFiles)" ng-model="data" class="btn btn-primary" accept="image/*" ngf-accept="\'image/*\'"><span ng-if="(model == null || model === undefined) && (data == null || data === undefined)"><i class="fa fa-image"></i> Select image</span> <span ng-if="(model != null || modal != undefined) || data"><i class="fa fa-gear"></i> Change</span></span></div></div>')}]),angular.module("templates/fluid/fluidLookup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidLookup.html",'<div class="form-group flow-form"><div ng-transclude></div><label column="12" class="control-label" for="{{name}}">{{label}} <span class="text-danger" ng-show="required">*</span><div class="input-group" name="{{name}}"><input ng-disabled="disabled" id="ctnr_{{id}}" href="#" title="{{label}}" readonly class="form-control" ng-required="required" ng-click="look()" style="color:#000000;background: #ffffff"><span ng-if="isNotModeled()" class="input-group-btn"><button type="button" ng-disabled="disabled" class="btn btn-info" ng-click="look()"><span class="fa fa-search"></span></button></span> <span ng-if="isModeled()" class="input-group-btn"><button type="button" title="clear" class="btn btn-info" ng-disabled="disabled" ng-click="clear()"><span class="fa fa-eraser"></span></button></span></div></label></div>')}]),angular.module("templates/fluid/fluidModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidModal.html",'<div class="modal fade fluid-modal" role="dialog"><div class="modal-dialog modal-lg"><div class="modal-content"><ng-transclude></ng-transclude></div></div></div>')}]),angular.module("templates/fluid/fluidNotify.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidNotify.html",'<li class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle"><i class="fa fa-bell fa-fw"></i> <span class="badge badge-blue" ng-show="fs.alerts.length > 0">{{fs.alerts.length}}</span></a><ul class="dropdown-menu dropdown-alerts"><li><p>You have {{fs.alerts.length > 0 ? fs.alerts.length +\' new\' : \'no new\' }} notifications</p></li><li><div class="dropdown-slimscroll"><ul><li ng-repeat="alert in fs.top"><a href="#" ng-click="open(alert)" ng-class="!alert.notified ?\'active\':\'\'"><div ng-class="getLabelScheme(alert)" class="fluid-notify-icon"><i ng-class="getMessageTypeGlyph(alert)"></i></div>&nbsp;{{alert.message | characters: 25 : false}}<span class="pull-right text-muted small">{{fs.interval(alert)}}</span></a></li></ul></div></li><li class="last"><a href="#" class="text-right" ng-click="openNotificationCenter()">See all alerts</a></li></ul></li>')}]),angular.module("templates/fluid/fluidPanel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidPanel.html",'<div id="_id_fp_{{task.id}}" task class="portlet box {{!flowFrameService.fullScreen ? \'portlet-primary\' : \'portlet-default\'}} fluid-panel"><div class="portlet-header" ng-show="!task.locked"><div class="caption"><a ng-if="!flowFrameService.fullScreen " data-toggle="collapse" data-target="#_{{task.id}}" href="#" class="flow-panel-heading-title"><span ng-class="task.glyph" class="hidden-sm hidden-md hidden-xs"></span><span ng-if="task.loaded">&nbsp;{{task.title}} - {{task.page.title}}</span></a> <span ng-if="task.loaded && flowFrameService.fullScreen">&nbsp;{{task.title}} - {{task.page.title}}</span> <img ng-if="!task.loaded && !flowFrameService.fullScreen" src="images/loader/windows_like.GIF"> <img ng-if="!task.loaded && flowFrameService.fullScreen" src="images/loader/windows_like_2.GIF"></div><div class="tools"><div class="btn-group btn-group-lg hidden-lg"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><span ng-class="task.glyph" class="flow-panel-icon-control"></a><ul class="dropdown-menu dropdown-menu-right dropdown-menu-inverse"><li><a href="#" ng-click="task.refresh()">Refresh</a></li><li class="divider hidden-lg hidden-sm hidden-xs"></li><li ng-if="!flowFrameService.fullScreen"><a ng-click="task.fullScreen()">Fullscreen</a></li><li ng-if="flowFrameService.fullScreen"><a ng-click="task.fluidScreen()">Fluidscreen</a></li><li class="hidden-lg"><a href="#" ng-click="task.hide(task)">Minimize</a></li><li ng-class="task.locked ?\n                        \'hidden-sm hidden-md hidden-xs\' : \'\'" class="divider"></li><li><a ng-class="task.locked ? \'hidden-sm hidden-md hidden-xs\' : \'\'" href="#" ng-click="task.close()">Close</a></li></ul></div><div class="hidden-md hidden-xs hidden-sm btn-group btn-group-md panel-control"><button ng-hide="flowFrameService.fullScreen" ng-disabled="task.pinned" title="Maximize - 50" class="btn btn-info" ng-click="task.max50()"><i class="element-center fa fa-arrows-h" style="transform: scaleX(0.9)"></i></button> <button ng-hide="flowFrameService.fullScreen" ng-disabled="task.pinned" ng-click="task.max100()" class="btn btn-info"><i title="Maximize - 100" class="element-center fa fa-arrows-h" style="transform: scaleX(1.3)"></i></button> <button ng-disabled="task.pinned" title="Minimize" ng-click="task.hide(task)" class="btn {{flowFrameService.fullScreen ? \'btn-default\' : \'btn-info\'}}"><i title="minimize" class="element-center fa fa-angle-down"></i></button> <button ng-if="!flowFrameService.fullScreen" class="btn btn-info" ng-click="task.fullScreen()"><i title="Full screen" class="element-center fa fa-expand"></i></button> <button ng-if="flowFrameService.fullScreen" class="btn {{flowFrameService.fullScreen ? \'btn-default\' : \'btn-info\'}}" ng-click="task.fluidScreen()"><i title="Fluid screen" class="element-center fa fa-th"></i></button> <button class="btn {{flowFrameService.fullScreen ? \'btn-default\' : \'btn-info\'}}" ng-click="task.refresh()"><i title="Refresh" class="element-center fa" ng-class="task.loaded ? \'fa-refresh\' : \'fa-spin fa-refresh\'"></i></button> <button class="btn {{flowFrameService.fullScreen ? \'btn-default\' : \'btn-danger\'}}" ng-disabled="task.pinned||task.locked" ng-click="task.close()"><i class="element-center fa fa-close" title="Close" title="close"></i></button></div></div></div><div id="_{{task.id}}" class="panel-collapse collapse in"><div id="_id_fpb_{{task.id}}" class="portlet-body minHeight flow-panel" ng-disabled="!task.loaded"><flow-message id="{{flow.getElementFlowId(\'pnl_msg\')}}"></flow-message><flow-tool size="medium" flow="flow" id="{{flow.getElementFlowId(\'flw_tl\')}}" ng-if="task.showToolBar" task="task" pages="task.navPages"></flow-tool><div id="page_div_{{task.id}}" class="flow-panel-page" ng-style="!flowFrameService.fullScreen?{overflow:auto}:{}"></div></div></div></div>')}]),angular.module("templates/fluid/fluidRadio.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidRadio.html",'<div class="form-group flow-form"><label column="12" class="control-label" for="{{name}}">{{label}} <span class="text-danger" ng-show="required">*</span><div name="{{name}}" class="fluid-radio"></div></label></div>')}]),angular.module("templates/fluid/fluidReportTable.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidReportTable.html",'<table class="table table-hover table-condensed" ng-init="rep = []"><thead><tr><th class="bg-primary header-center"><input type="checkbox" ng-model="task.table.isMaterialsAdvisor" flow-tooltip tooltip-title="{{task.table.isMaterialsAdvisor == true ? \'Hide materials advisor\' : \'Show materials advisor\'}}" tooltip-time="300" tooltip-at="top right" tooltip-my="bottom left"></th><th class="bg-info"><input type="checkbox" ng-model="task.table.isWeek" flow-tooltip tooltip-title="{{task.table.isWeek == true ? \'Hide week\' : \'Show week\'}}" tooltip-time="300" tooltip-at="top right" tooltip-my="bottom left"></th><th ng-if="!task.isYear" class="bg-info"><input type="checkbox" ng-model="task.table.isYear" flow-tooltip tooltip-title="{{task.table.isWeek == true ? \'Hide year\' : \'Show year\'}}" tooltip-time="300" tooltip-at="top right" tooltip-my="bottom left"></th><th class="bg-info header"></th><th class="bg-info header"></th><th class="bg-success"></th><th class="bg-info"></th><th class="bg-info"></th><th class="bg-success"></th><th class="bg-info"></th><th class="bg-info"></th><th class="bg-success"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th><th class="bg-warning"></th></tr></thead><thead><tr><th class="bg-primary">{{!task.isAgent && task.table.isMaterialsAdvisor ? \'Materials Advisor\' :\'Action\'}}</th><th class="bg-info" ng-if="task.table.isWeek">Week</th><th ng-if="!task.isYear && task.table.isYear" class="bg-info">Year</th><th class="bg-info header">Planned Target</th><th class="bg-info header">Planned Actual</th><th class="bg-success">Planned Call Productivity</th><th class="bg-info">Unplanned Target</th><th class="bg-info">Unplanned Actual</th><th class="bg-success">Unplanned Call Productivity</th><th class="bg-info">Total Target</th><th class="bg-info">Total Actual</th><th class="bg-success">Total Call Productivity</th><th class="bg-warning">Exam Copies Distribution</th><th class="bg-warning">Invitation to Events</th><th class="bg-warning">Confirmation of Events</th><th class="bg-warning">Giveaways Distribution</th><th class="bg-warning">Delivery of Incentive/Donation</th><th class="bg-warning">Purchase Order</th><th class="bg-warning">Delivery of Add\'l Order / TRM / Compli</th><th class="bg-warning">Booklist</th><th class="bg-warning">Updated Customer Info Sheet</th><th class="bg-warning">Implemented Ex-Sem</th></tr></thead><tbody ng-repeat="(month , report) in task.result | groupBy: \'reportMonth\'" ng-init="rep.push({selectedWeek:0})"><tr><td class="bg-info" colspan="2">{{month}}</td><td colspan="3"><select ng-model="rep[$index].selectedWeek"><option value="1" label="Week 1"></option><option value="2" label="Week 2"></option><option value="3" label="Week 3"></option><option value="4" label="Week 4"></option><option value="5" label="Week 5"></option><option value="0" label="All week"></option></select></td></tr><tr ng-show="rep[$index].selectedWeek == 0" ng-repeat="day in report"><td><a href="#" ng-click="task.getCustomers(day)"><span><i ng-class="(day.view ? \'fa fa-search-minus\' : \'fa fa-search-plus\')"></i> {{ !task.isAgent && table.isMaterialsAdvisor ? day.materialsAdvisor : \'\'}}</span></a></td><td ng-if="table.isWeek">{{day.week}}</td><td ng-if="!task.isYear">{{day.year}}</td><td>{{day.plannedTarget}}</td><td>{{day.plannedActual}}</td><td>{{day.plannedCallProductivity | setDecimal: 2}}%</td><td>{{day.unplannedTarget}}</td><td>{{day.unplannedActual}}</td><td>{{day.unplannedCallProductivity | setDecimal: 2}}%</td><td>{{day.totalActivity}}</td><td>{{day.unplannedActual + day.unplannedActual}}</td><td>{{day.totalCallProductivity | setDecimal: 2}}%</td><td>{{day.ecd}}</td><td>{{day.ite}}</td><td>{{day.coe}}</td><td>{{day.gd}}</td><td>{{day.doi}}</td><td>{{day.po}}</td><td>{{day.daotrc}}</td><td>{{day.bookList}}</td><td>{{day.ucis}}</td><td>{{day.ies}}</td></tr></tbody></table>')}]),angular.module("templates/fluid/fluidSelect.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidSelect.html",'<div class="form-group flow-form"><label column="12" class="control-label" for="{{name}}">{{label}}<span class="text-danger" ng-show="required">*</span><select id="{{id}}_select" data-toggle="select" class="form-control" ng-required="required" ng-disabled="disabled" name="{{name}}" ng-model="model" ng-options="{{options}}"><option class="hidden-lg hidden-md" value disabled selected>Select {{label}}</option></select></label></div>')}]),angular.module("templates/fluid/fluidTextArea.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidTextArea.html",'<div class="form-group flow-form"><label column="12" class="control-label">{{label}}<span class="text-danger" ng-show="required">*</span><textarea rows="{{rows}}" cols="{{cols}}" name="{{name}}" ng-disabled="disabled" class="form-control" ng-model="model" type="{{type}}" ng-required="required"></label>\n\n</div>')}]),angular.module("templates/fluid/fluidToolbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidToolbar.html",'<div class="container-fluid animated fadeIn anim-dur" style="overflow: auto"><div><ul class="breadcrumb"><li class="pull-left" ng-repeat="page in task.navPages"><a title="page.title" href="#" ng-click="goToEvent(page.name,page.param)">{{page.title}}</a></li><div class="form-group pull-right"><div class="btn-group {{size}}"><button id="btn_tool_{{control.id}}_{{task.id}}" ng-repeat="control in task.toolbars" title="{{control.label}}" class="btn button-tool" ng-class="getClass(control.uiType)" ng-click="runEvent(control)" ng-disabled="control.disabled" type="button"><span ng-class="control.glyph"></span></button></div></div><div class="clearfix"></div></ul></div></div>')}]),angular.module("templates/fluid/fluidUploader.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidUploader.html","<div></div>")}]);